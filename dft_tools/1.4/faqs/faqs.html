<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Frequently-Asked Questions &mdash; TRIQS DFTTools  documentation</title>
    
    <link rel="stylesheet" href="../_static/triqs.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/MathJax/MathJax.js?config=default"></script>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="top" title="TRIQS DFTTools  documentation" href="../contents.html" />
    <link rel="up" title="Documentation" href="../documentation.html" />
    <link rel="next" title="Reporting issues" href="../issues.html" />
    <link rel="prev" title="Block Structure" href="../reference/block_structure.html" />
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,700' rel='stylesheet' type='text/css'>
    <script src="../_static/cufon-yui.js" type="text/javascript"></script>
    <script src="../_static/spaceman.cufonfonts.js" type="text/javascript"></script>
    <script type="text/javascript">
      Cufon.replace('.triqs', { fontFamily: 'spaceman', hover: true }); 
    </script>
 
    <style type="text/css">
      table.right { float: right; margin-left: 20px; }
      table.right td { border: 1px solid #ccc; }
      
    </style>

  </head>
  <body role="document">
<div class="pageheader">
  <ul>
    
    <li><a href="../install.html">Install</a></li>
    
    <li><a href="../documentation.html">Documentation</a></li>
    
    <li><a href="../issues.html">Issues</a></li>
    
    <li><a href="../about.html">About DFTTools</a></li>
    
  </ul>
  <div>
    <h1 style="padding:0; margin: 10px 0 0 0;"><a class="triqs" href="../index.html">dft tools</a></h1>
    <span style="font-size: 14px; margin: 0px; padding: 0px;">connecting <a class="triqs" style="font-size: 12px" href="http://triqs.github.io/1.x">TRIQS</a> to DFT packages</span>
  </div>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../issues.html" title="Reporting issues"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../reference/block_structure.html" title="Block Structure"
             accesskey="P">previous</a> |</li>
    <li><a href="../index.html">Home</a> &raquo;</li>

          <li class="nav-item nav-item-1"><a href="../documentation.html" accesskey="U">Documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../contents.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Frequently-Asked Questions</a><ul>
<li><a class="reference internal" href="#wien2k-fermi-error-when-running-x-lapw2-almd-band">wien2k: FERMI ERROR when running <cite>x lapw2 -almd -band</cite></a></li>
<li><a class="reference internal" href="#how-do-i-plot-the-output-of-spaghettis">How do I plot the output of <cite>spaghettis</cite>?</a></li>
<li><a class="reference internal" href="#x-optic-does-not-write-a-case-pmat-file">x optic does not write a case.pmat file</a></li>
<li><a class="reference internal" href="#no-module-named-pytriqs-error-when-running-a-script">No module named pytriqs.*** error when running a script</a></li>
<li><a class="reference internal" href="#why-is-my-calculation-not-working">Why is my calculation not working?</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../reference/block_structure.html"
                        title="previous chapter">Block Structure</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../issues.html"
                        title="next chapter">Reporting issues</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/faqs/faqs.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="frequently-asked-questions">
<h1>Frequently-Asked Questions<a class="headerlink" href="#frequently-asked-questions" title="Permalink to this headline">¶</a></h1>
<div class="section" id="wien2k-fermi-error-when-running-x-lapw2-almd-band">
<h2>wien2k: FERMI ERROR when running <cite>x lapw2 -almd -band</cite><a class="headerlink" href="#wien2k-fermi-error-when-running-x-lapw2-almd-band" title="Permalink to this headline">¶</a></h2>
<p>In some versions of Wien2k, there is a problem in running <cite>x lapw2 -almd -band</cite>.</p>
<p>A hack solution is as follows:
1) <cite>x lapw1 -band</cite>
2) edit in2 file: replace &#8216;TOT&#8217; with &#8216;QTL&#8217;, &#8216;TETRA&#8217; with &#8216;ROOT&#8217;
3) <cite>x lapw2 -almd -band</cite>
4) <cite>dmftproj -band</cite> (add the Fermi energy to file, it can be found by running <cite>grep :FER *.scf</cite>)</p>
</div>
<div class="section" id="how-do-i-plot-the-output-of-spaghettis">
<h2>How do I plot the output of <cite>spaghettis</cite>?<a class="headerlink" href="#how-do-i-plot-the-output-of-spaghettis" title="Permalink to this headline">¶</a></h2>
<p>In python, you can do the following for example. You should pass the name of
the file written out by the spaghettis function.  Of course, you should change
the parameters as desired.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="n">filename</span> <span class="o">=</span> <span class="s">&#39;spaghettis_to_plot.dat&#39;</span>      <span class="c"># Name of file</span>
<span class="n">emin</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1.0</span>                             <span class="c"># Minimum of energy range to plot</span>
<span class="n">emax</span> <span class="o">=</span> <span class="mf">1.5</span>                              <span class="c"># Maximum of energy range to plot</span>
<span class="n">zmin</span> <span class="o">=</span> <span class="mf">0.0</span> <span class="c">#z.min()                     # Minimum of colour range</span>
<span class="n">zmax</span> <span class="o">=</span> <span class="mf">5.0</span> <span class="c">#z.max()                     # Maximum of colour range</span>
<span class="n">kpos</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">200</span><span class="p">]</span>           <span class="c"># Position of high-symmetry k-point </span>
<span class="n">kname</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;M&#39;</span><span class="p">,</span> <span class="s">&#39;G&#39;</span><span class="p">,</span> <span class="s">&#39;X&#39;</span><span class="p">,</span> <span class="s">&#39;Z&#39;</span><span class="p">,</span> <span class="s">&#39;M&#39;</span><span class="p">]</span>       <span class="c"># Name of high-symmetry k-point</span>

<span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
<span class="n">n_k</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">b</span><span class="p">[:,</span><span class="mi">0</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">mesh_size</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">b</span><span class="p">[:,</span><span class="mi">0</span><span class="p">])</span><span class="o">/</span><span class="n">n_k</span>
<span class="n">klist</span> <span class="o">=</span> <span class="n">b</span><span class="p">[:,</span><span class="mi">0</span><span class="p">][::</span><span class="n">mesh_size</span><span class="p">]</span>
<span class="n">elist</span> <span class="o">=</span> <span class="n">b</span><span class="p">[:,</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">:</span><span class="n">mesh_size</span><span class="p">]</span>
<span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span><span class="n">klist</span><span class="p">,</span><span class="n">elist</span><span class="p">)</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">b</span><span class="p">[:,</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">n_k</span><span class="p">,</span><span class="n">mesh_size</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">pcolormesh</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cm</span><span class="o">.</span><span class="n">Blues</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="n">zmin</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">zmax</span><span class="p">)</span>
<span class="n">cb</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">klist</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span><span class="n">klist</span><span class="o">.</span><span class="n">max</span><span class="p">())</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">emin</span><span class="p">,</span><span class="n">emax</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">hlines</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">n_k</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">24</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">kpos</span><span class="p">:</span> <span class="n">ax</span><span class="o">.</span><span class="n">vlines</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">emin</span><span class="p">,</span><span class="n">emax</span><span class="p">,</span><span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">kpos</span><span class="p">,</span><span class="n">kname</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">&#39;Energy (</span><span class="si">%s</span><span class="s">)&#39;</span><span class="o">%</span><span class="s">&#39;eV&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">kname</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;_&#39;</span><span class="o">+</span><span class="n">filename</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;dat&#39;</span><span class="p">,</span><span class="s">&#39;png&#39;</span><span class="p">),</span><span class="n">bbox_inches</span><span class="o">=</span><span class="s">&#39;tight&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="x-optic-does-not-write-a-case-pmat-file">
<h2>x optic does not write a case.pmat file<a class="headerlink" href="#x-optic-does-not-write-a-case-pmat-file" title="Permalink to this headline">¶</a></h2>
<p>Make sure that you set line 6 to &#8220;ON&#8221; and put a &#8220;1&#8221; to the following line.
The &#8220;1&#8221; is undocumented in Wien2k, but needed to have <cite>case.pmat</cite> written.
However, we are working on reading directly the <cite>case.mommat2</cite> file.</p>
</div>
<div class="section" id="no-module-named-pytriqs-error-when-running-a-script">
<h2>No module named pytriqs.*** error when running a script<a class="headerlink" href="#no-module-named-pytriqs-error-when-running-a-script" title="Permalink to this headline">¶</a></h2>
<p>Make sure that have properly build, tested and installed TRIQS and DFTTools
using, make, make test and make install. Additionally, you should always
use pytriqs to call your scripts, e.g. pytriqs yourscript.py</p>
</div>
<div class="section" id="why-is-my-calculation-not-working">
<h2>Why is my calculation not working?<a class="headerlink" href="#why-is-my-calculation-not-working" title="Permalink to this headline">¶</a></h2>
<p>Are you running in the right shell?</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../issues.html" title="Reporting issues"
             >next</a> |</li>
        <li class="right" >
          <a href="../reference/block_structure.html" title="Block Structure"
             >previous</a> |</li>
    <li><a href="../index.html">Home</a> &raquo;</li>

          <li class="nav-item nav-item-1"><a href="../documentation.html" >Documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2011-2013, M. Aichhorn, L. Pourovskii, V. Vildosola, C. Martins.
    </div>
  </body>
</html>