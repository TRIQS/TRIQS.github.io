
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Interface with Elk &#8212; triqs_dft_tools  documentation</title>
    <link rel="stylesheet" href="../_static/triqs.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=default"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Wannier90 Converter" href="conv_W90.html" />
    <link rel="prev" title="Interface with VASP" href="conv_vasp.html" />
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,700' rel='stylesheet' type='text/css'>
    <script src="../_static/cufon-yui.js" type="text/javascript"></script>
    <script src="../_static/spaceman.cufonfonts.js" type="text/javascript"></script>
    <script type="text/javascript">
      Cufon.replace('.triqs', { fontFamily: 'spaceman', hover: true }); 
    </script>
 
    <style type="text/css">
      table.right { float: right; margin-left: 20px; }
      table.right td { border: 1px solid #ccc; }
      
    </style>

  </head><body>
<div class="pageheader">
  <ul>
    
    <li><a href="../install.html">Install</a></li>
    
    <li><a href="../documentation.html">Documentation</a></li>
    
    <li><a href="../tutorials.html">Tutorials</a></li>
    
    <li><a href="../issues.html">Issues</a></li>
    
    <li><a href="../about.html">About DFTTools</a></li>
    
  </ul>
  <div>
    <h1 style="padding:0; margin: 10px 0 0 0;"><a class="triqs" href="../index.html">dft tools</a></h1>
    <span style="font-size: 14px; margin: 0px; padding: 0px;">connecting <a class="triqs" style="font-size: 12px" href="http://triqs.github.io/triqs">TRIQS</a> to DFT packages</span>
  </div>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="conv_W90.html" title="Wannier90 Converter"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="conv_vasp.html" title="Interface with VASP"
             accesskey="P">previous</a> |</li>
    <li><a href="../index.html">Home</a> &raquo;</li>

          <li class="nav-item nav-item-1"><a href="../documentation.html" >Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="conversion.html" accesskey="U">Supported interfaces</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../contents.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Interface with Elk</a><ul>
<li><a class="reference internal" href="#conversion-for-the-dmft-self-consistency-cycle">Conversion for the DMFT self-consistency cycle</a></li>
<li><a class="reference internal" href="#data-for-post-processing-correlated-spectral-functions">Data for post-processing - Correlated Spectral functions</a></li>
<li><a class="reference internal" href="#spectral-function-from-elk-inputs">Spectral function from Elk inputs</a></li>
<li><a class="reference internal" href="#spectral-function-contour-plots-fermi-surfaces-from-elk-inputs">Spectral function Contour Plots (Fermi Surfaces) from Elk inputs</a></li>
<li><a class="reference internal" href="#dft-dmft-wavefunction-dependent-quantities">DFT+DMFT wavefunction dependent quantities</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="conv_vasp.html"
                        title="previous chapter">Interface with VASP</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="conv_W90.html"
                        title="next chapter">Wannier90 Converter</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/guide/conv_elk.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="interface-with-elk">
<span id="convelk"></span><h1>Interface with Elk<a class="headerlink" href="#interface-with-elk" title="Permalink to this headline">¶</a></h1>
<p>This is the first iteration of the Elk-TRIQS interface, so certain inputs may change in later updates. The Elk part of the interface is not currently in the main distribution, but it can be found <span class="xref std std-ref">here</span>.</p>
<p>We assume that the user has obtained a self-consistent solution of the
Kohn-Sham equations with Elk (a full tutorial can be found here <a class="reference internal" href="../tutorials/svo_elk/srvo3.html#srvo3-elk"><span class="std std-ref">Elk SVO tutorial</span></a>). Also, the user needs to be familiar with the main in/output files of Elk, and how to run
the DFT code. Further information about Elk can be found on the <span class="xref std std-ref">official Elk website</span>.</p>
<div class="section" id="conversion-for-the-dmft-self-consistency-cycle">
<h2>Conversion for the DMFT self-consistency cycle<a class="headerlink" href="#conversion-for-the-dmft-self-consistency-cycle" title="Permalink to this headline">¶</a></h2>
<p>Once the user has obtained the groundstate calculation, they will have to rerun Elk but with some small changes to the inputs in the elk.in file which will be explained below. The Elk part of the interface calculates and outputs the Wannier projectors. All downfolding related flags are set in the elk input file, and Elk determines automatically by symmetry equivalent sites. The TRIQS Elk converter then reads in these projectors along with the other Elk ascii files which would have been generated in the Elk ground state calculation. This information is then packed into the HDF5 file.</p>
<p>In the following, we use SrVO3 as an example to explain the flags required in the elk.in input file. An example elk.in of SrVO3 is available in the <span class="xref std std-ref">SrVO3 tutorial</span>.</p>
<p>The projectors are generated in Elk using these alterations in the elk.in file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>task
 805

wanproj
 1            !1) number of projector species
 2 2 3        !2) species number, l value and lm submatrix size
 7 8 9        !3) cubic harmonic lm indices
 -0.055 0.07  !4) Correlated energy window in Hartrees (this is [-1.5, 1.9] in eV)
</pre></div>
</div>
<p>The first flag “task” specifies Elk to do the Wannier projector calculation in the Elk input convention. The “wanproj” flag specifies the information needed to generate the desired projectors (the exclamation marks are comment flags in Fortran). Below gives the meaning of each line:</p>
<ol class="arabic simple">
<li>The number of different species to generate the projectors for. If the material has multiple atoms of the same species, then the projectors will be generated for all of these atoms. Information about whether these atoms are symmetrically equivalent is written to the PROJ.OUT file. Generating projectors for multiple species requires lines 2) and 3) to be repeated for each projector species.</li>
<li>The desired species index (relative to the order of the “atoms” input in elk.in), the l value and the number of wanted lm orbitals for the projectors.</li>
<li>The lm indices (in the cubic harmonics by default) where lm = 1 refers to the s orbital, lm = 2,3,4 refers to the p orbitals, lm = 5,6,7,8,9 refers to the d orbitals and finally lm = 10,11,12,13,14,15,16 refers to the f orbitals. In the example above, this specifies that we want the t2g orbitals which has size 3 [last number in line 2)] and the lm indices are 7, 8 and 9 as specified in line 3). If, on the other hand, the user wishes to use all of the d-orbitals then all 5 orbital indices need to be included along with specifying that all 5 orbitals will be used [at the end of line 2)].</li>
<li>The correlated energy window (in Hartree) to generate the projectors within.</li>
</ol>
<p>It should be noted that the indices in line 3) will change if another lm basis is used.
The default is the cubic harmonic basis. The flags in elk.in required to change the spherical harmonic basis are:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cubic</span>
 <span class="o">.</span><span class="n">true</span><span class="o">.</span>

<span class="n">lmirep</span>
 <span class="o">.</span><span class="n">true</span><span class="o">.</span>
</pre></div>
</div>
<p>Above are the default inputs. If both of these flags are set to .false., the projectors will be generated in the complex spherical harmonic basis. It is possible to generate the projectors in Elk’s irreducible basis by setting cubic to .false., but this is experimental and the TRIQS side of the interface is
currently unable to convert the projectors in that basis. Finally, these projectors are written to file in the complex spherical harmonic basis.</p>
<p id="elk-files">The rest of the elk.in file can remain unchanged. This 805 task calculates the projectors which are written into the WANPROJ_L**_S**_A****.OUT file(s). Along with this, the other written file (PROJ.OUT) specficies some information about the projectors (like atom equivalency, lm indices and so on) needed for reading the files into the TRIQS library. The PROJ.OUT file contains comments about its outputs. Here’s a list of all of the input files needed for this part of the TRIQS converter:</p>
<ol class="arabic simple">
<li>WANPROJ_L**_S**_A****.OUT - file containing the projectors and band window indices.</li>
<li>PROJ.OUT -  specficies some information about the projectors.
(like atom equivalency, lm indices and so on) needed for reading into the TRIQS library.</li>
<li>EIGVAL.OUT - contains the energies and latice vector coordinates for each k-point.</li>
<li>EFERMI.OUT - contains the Fermi energy.</li>
<li>KPOINTS.OUT - contains the k-point weights and lattice vectors.</li>
<li>SYMCRYS.OUT - has the crystal symmetries used for symmetries observables.</li>
<li>LATTICE.OUT - has lattice-Cartesian basis transformation matrices.</li>
<li>GEOMETRY.OUT - file with the lattice positions of every atom of each species.</li>
</ol>
<p>Moreover, the Wannier charge density matrix (in WANCHARGE.OUT) and the Wannier spectral function (in WANSF_L**_S**_A****_0*.OUT) are calculated. These files are not used in the interface.</p>
<p>As a side note, there are two other tasks which also generate the Wannier projectors. Task 804 generates the same outputs as 805 except it doesn’t calculate the Wannier charge and spectral function. Task 806 outputs the same information as 805, but it generates the projectors (and other k-dependent variables) on a different user defined ngridk mesh. These tasks are parallelized with both OpenMP and MPI.</p>
<p>The Elk outputs are read into the TRIQS library using the following lines:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">triqs_dft_tools.converters.elk</span> <span class="k">import</span> <span class="o">*</span>
<span class="n">Converter</span> <span class="o">=</span> <span class="n">ElkConverter</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span> <span class="n">repacking</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">Converter</span><span class="o">.</span><span class="n">convert_dft_input</span><span class="p">()</span>
</pre></div>
</div>
<p>The first two lines import and load the Elk converter module and the last line executes the conversion into the filename.h5 HDF5 file.</p>
</div>
<div class="section" id="data-for-post-processing-correlated-spectral-functions">
<h2>Data for post-processing - Correlated Spectral functions<a class="headerlink" href="#data-for-post-processing-correlated-spectral-functions" title="Permalink to this headline">¶</a></h2>
<p>In case you want to do post-processing of your data using the module <code class="xref py py-class docutils literal notranslate"><span class="pre">SumkDFTTools</span></code>, some more files have to be converted to the HDF5 archive. Some of this has been laid out in <a class="reference internal" href="analysis.html#analysis"><span class="std std-ref">Tools for analysis</span></a>, but the Elk specific functions are described in the following sections. Below, we will discuss how to input the information for correlated spectral functions (band structures) and which is then calculated using “spaghettis” in <a class="reference internal" href="analysis.html#analysis"><span class="std std-ref">Tools for analysis</span></a>. However, band character band structure plots have not yet been implemented.</p>
<p>In Elk, the elk.in requires the altered flag:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">task</span>
 <span class="mi">820</span>
</pre></div>
</div>
<p>As well as the wanproj flag (which has be discussed previously) and the plot1d flag (refer to the Elk manual). The new output files of this task required for the interface are:</p>
<ol class="arabic simple">
<li>BAND.OUT - the energy eigenvalues along the user specified path.</li>
<li>PROJ_WANBAND.OUT - same as PROJ.OUT but for band structure projectors</li>
<li><dl class="first docutils">
<dt>WANPROJ_L**_S**_A****_WANBAND.OUT - same as WANPROJ_L**_S**_A****.OUT</dt>
<dd>but for band structure projectors.</dd>
</dl>
</li>
</ol>
<p>(The ascii output files which have the new extension of _WANBAND.OUT are specific for this post processing calculation.)</p>
<p>The band structure information is converted into TRIQS by using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Converter</span><span class="o">.</span><span class="n">convert_bands_input</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="spectral-function-from-elk-inputs">
<h2>Spectral function from Elk inputs<a class="headerlink" href="#spectral-function-from-elk-inputs" title="Permalink to this headline">¶</a></h2>
<p>Elk does not calculate the theta projectors for partial DOS calculations. Instead, Elk outputs the band characters into the file BC.OUT when using the elk.in task:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">task</span>
<span class="mi">803</span>
</pre></div>
</div>
<p>The contents of BC.OUT need to be converted into the HDF5 file by using the Elk Converter module:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">triqs_dft_tools.converters.elk</span> <span class="k">import</span> <span class="o">*</span>
<span class="n">Converter</span> <span class="o">=</span> <span class="n">ElkConverter</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span> <span class="n">repacking</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">Converter</span><span class="o">.</span><span class="n">dft_band_characters</span><span class="p">()</span>
</pre></div>
</div>
<p>Once these have been saved to the HDF5 file (called “filename” here), the spectral function can be calculated with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SK</span><span class="o">.</span><span class="n">elk_dos</span><span class="p">(</span><span class="n">broadening</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">with_Sigma</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">with_dc</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">pdos</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">nk</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
<p>This outputs the total spectral function and the partial spectral function if enabled. Most of the user inputs are similar to the “SK.dos_parproj_basis()” module in <a class="reference internal" href="analysis.html#analysis"><span class="std std-ref">Tools for analysis</span></a>. The “pdos” flag when “True” enables the partial dos of each lm value to be calculated. It should be noted that these band characters are in Elk’s irreducible lm basis and as such, the user has to check the irreducible representation used in Elk. This information can be found in the file ELMIREP.OUT after running task 10 (the DOS calculating task). The “nk” flag enables the calculation of the occupied spectral funciton. Here, nk needs to be the occupation density matrix (calculated from integrating the Green’s function on the Matsubara axis) in the Bloch basis. This input needs to be in the same format as the occupation density matrix “deltaN” calculated in the sumk_DFT.calc_density_correction(dm_type=’elk’) module.</p>
</div>
<div class="section" id="spectral-function-contour-plots-fermi-surfaces-from-elk-inputs">
<h2>Spectral function Contour Plots (Fermi Surfaces) from Elk inputs<a class="headerlink" href="#spectral-function-contour-plots-fermi-surfaces-from-elk-inputs" title="Permalink to this headline">¶</a></h2>
<p>Here, we will discuss how to plot the Fermi surface contour or any other non-zero omega spectral function contour plot. This is currently tailored for the Elk inputs. From this point, we will refer to these contours as Fermi surfaces. The energy eigenvalues, projectors and so on required for the Fermi surface plot needs to be outputed from Elk. This is done by using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">task</span>
<span class="mi">807</span>
</pre></div>
</div>
<p>in Elk, but unlike the previous Elk interface tasks, the k-mesh grid needs to be specified. This is done like using the same inputs as the Fermi surface calculations in Elk. In Elk, The user needs to specify the “plot3d” input flag used to generate the k-mesh which the interface variables are evaluated on. A simple example is for SrVO3 where plot3d would look something like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>plot3d
0.0 0.0 0.0 !1) origin
1.0 0.0 0.0 !2) vertex 1
0.0 1.0 0.0 !3) vertex 2
0.0 0.0 1.0 !4) vertex 3
32 32 32    !5) k-mesh grid size
</pre></div>
</div>
<p>Lines 1) to 4) specifies the corners (in lattice coordinates) of the k-grid box and line 5) is the grid size in each direction (see the Elk manual). If the user desires to plot a 2D plane, then the user should define the plane using lines 2) and 3) [relative to line 1)] and define line 4) to be the cross-product of lines 2) and 3) [i.e. the vector in line 4) is normal to the 2D plane]. The outputs will be in terms of the k-dependent quantities in the irreducible Brillouin zone (IBZ). The files needed for the interface are:</p>
<ol class="arabic simple">
<li>EIGVAL_FS.OUT - same as EIGVAL.OUT but the output is of the Fermi surface calculation.</li>
<li>KPOINT_FS.OUT - same as KPOINT.OUT but the output is of the Fermi surface calculation.</li>
<li>PROJ_FS.OUT - same as PROJ.OUT but the output is of the Fermi surface calculation.</li>
<li>WANPROJ_L**_S**_A****_FS.OUT - same as WANPROJ_L**_S**_A****.OUT but the output is of the Fermi surface calculation.</li>
<li>EFERMI.OUT - contains the Fermi energy.</li>
<li>SYMCRYS.OUT - has the crystal symmetries used for symmetries observables.</li>
<li>LATTICE.OUT - has lattice-Cartesian basis transformation matrices.</li>
</ol>
<p>(The ascii output files which have the extension of _FS.OUT are specific for this post processing calculation.)</p>
<p>These outputs are converted to the HDF5 file by:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">triqs_dft_tools.converters.elk</span> <span class="k">import</span> <span class="o">*</span>
<span class="n">Converter</span> <span class="o">=</span> <span class="n">ElkConverter</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span> <span class="n">repacking</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">Converter</span><span class="o">.</span><span class="n">convert_fs_input</span><span class="p">()</span>
</pre></div>
</div>
<p>The spectral function for the Fermi surface plots are calculated with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SK</span><span class="o">.</span><span class="n">fs_plot</span><span class="p">(</span><span class="n">broadening</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">mesh</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">FS</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">plane</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">sym</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">orthvec</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">with_Sigma</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">with_dc</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>The new flags specify the following:</p>
<ol class="arabic simple">
<li>“FS” - determines whether the output will be the Fermi surface and uses the closest omega value to 0.0 in the mesh.</li>
<li>“plane” - required to specify whether the Elk input parameters were generated on a k-mesh plane.</li>
<li>“sym” - needed if the IBZ will be folded out by using symmetry operations.</li>
<li>“orthvec” - (numpy array of length 3) needs to be specified if using “plane” as this input is the orthonormal vector to the 2D plane required for the folding out process.</li>
</ol>
<p>To give the user a range of output capabilities, This routine can be used in the following ways:</p>
<ol class="arabic simple">
<li>If using “with_Sigma”, the mesh will be the same as the self-energy. However, by setting FS=False, the user can input a mesh option if they desire the “Fermi surface” plots for each omega value (commensurate with the self-energy mesh) within the input range.</li>
<li>If the user is generating the DFT Spectral function plot (i.e. with_Sigma and with_dc both set to False), a mesh needs to be specified if FS=False. This function will output the spectral functions for the input mesh. Otherwise if FS is True, this would return the spectral function at omega=0.0.</li>
</ol>
<p>The output files will have the form of “Akw_FS_X.dat” (X being either up, down or ud) if FS=True or “Akw_X_omega_Y.dat” (Y being the omega mesh index) otherwise. The latter file will have the omega values within the file (the fourth column). The first three columns of both output file types specifies the cartesian lattice vector (kx, ky, kz) and the last column is the spectral function values.</p>
</div>
<div class="section" id="dft-dmft-wavefunction-dependent-quantities">
<h2>DFT+DMFT wavefunction dependent quantities<a class="headerlink" href="#dft-dmft-wavefunction-dependent-quantities" title="Permalink to this headline">¶</a></h2>
<p>The DFT+DMFT wavefunctions and occupations are generated in Elk by diagonalizing the full DFT+DMFT density matrix at each k-point during task 808. These are used to update the electron density which is then used to solve the Kohn-Sham equations once to complete a FCSC DFT+DMFT cycle. It is possible to calculate quantities which are solely dependent on the wavefunctions and occupations by using the aforementioned diagonalized set. After generating the DMATDMFT.OUT file, these diagonalized wavefunctions and occupations are calculated by amending elk.in with the new task:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">task</span>
 <span class="mi">809</span>
</pre></div>
</div>
<p>This will write the new second variational eigenvectors and occupations in the EVECSV.OUT and OCCSV.OUT binary files respectively. Then the wavefunction dependent quantities implemented within Elk can be calculated using these DFT+DMFT wavefunctions and occupations. Note that this only works for energy independent quantities. Also, the user has to ensure that the second variational eigenvectors will be used in determining the wavefunction dependent quantities. This is done by looking for the variable “tevecsv” in init0.f90 of Elk’s source code and making sure that this is set to .true. for the task number the user wishes to use.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="conv_W90.html" title="Wannier90 Converter"
             >next</a> |</li>
        <li class="right" >
          <a href="conv_vasp.html" title="Interface with VASP"
             >previous</a> |</li>
    <li><a href="../index.html">Home</a> &raquo;</li>

          <li class="nav-item nav-item-1"><a href="../documentation.html" >Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="conversion.html" >Supported interfaces</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2011-2020.
    </div>
  </body>
</html>