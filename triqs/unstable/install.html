
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Installation &#8212; TRIQS 2.2.0 documentation</title>
    <link rel="stylesheet" href="_static/triqs.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '2.2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=default"></script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Installing required libraries on Ubuntu" href="installation/ubuntu.html" />
    <link rel="prev" title="Welcome" href="index.html" />
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,700' rel='stylesheet' type='text/css'>
    <script src="_static/cufon-yui.js" type="text/javascript"></script>
    <script src="_static/spaceman.cufonfonts.js" type="text/javascript"></script>
    <script type="text/javascript">
      Cufon.replace('.triqs', { fontFamily: 'spaceman', hover: true }); 
    </script>
 
    <style type="text/css">
      table.right { float: right; margin-left: 20px; }
      table.right td { border: 1px solid #ccc; }
      
    </style>

  </head>
  <body>
<div class="pageheader">
  <ul>
    
    <li><a href="#">Install</a></li>
    
    <li><a href="documentation.html">Documentation</a></li>
    
    <li><a href="userguide.html">User guide</a></li>
    
    <li><a href="applications.html">Applications</a></li>
    
    <li><a href="contributing.html">Contributing</a></li>
    
    <li><a href="about.html">About TRIQS</a></li>
    
  </ul>
  <div>
    <h1 style="padding:0; margin: 10px 0 0 0;"><a class="triqs" href="index.html">triqs</a></h1>
    <span style="font-size: 14px; margin: 0px; padding: 0px;">a Toolbox for Research on Interacting Quantum Systems</span>
  </div>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="installation/ubuntu.html" title="Installing required libraries on Ubuntu"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome"
             accesskey="P">previous</a> |</li>
    <li><a href="index.html">Home</a> &raquo;</li>
 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="contents.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Installation</a><ul>
<li><a class="reference internal" href="#philosophy">Philosophy</a></li>
</ul>
</li>
<li><a class="reference internal" href="#packaged-versions-of-triqs">Packaged Versions of TRIQS</a><ul>
<li><a class="reference internal" href="#ubuntu-debian-packages">Ubuntu Debian packages</a></li>
<li><a class="reference internal" href="#docker">Docker</a></li>
<li><a class="reference internal" href="#singularity">Singularity</a></li>
<li><a class="reference internal" href="#binder">Binder</a></li>
</ul>
</li>
<li><a class="reference internal" href="#compiling-triqs-from-source-advanced">Compiling TRIQS from source (Advanced)</a><ul>
<li><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li><a class="reference internal" href="#installation-steps">Installation steps</a><ul>
<li><a class="reference internal" href="#environment-setup">Environment setup</a></li>
</ul>
</li>
<li><a class="reference internal" href="#further-reading">Further reading</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Welcome</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="installation/ubuntu.html"
                        title="next chapter">Installing required libraries on Ubuntu</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/install.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="installation">
<span id="id1"></span><h1>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h1>
<p>TRIQS and its applications are provided <em>a la carte</em>:
after you have installed the TRIQS library, you will be able to easily install
various TRIQS-based applications: impurity solvers, tools for DFT+DMFT
calculations, etc.</p>
<p>This page describes the installation of the TRIQS library itself. The
installation procedure of the applications is described on their respective
sites, under ‘Install’.</p>
<div class="section" id="philosophy">
<h2>Philosophy<a class="headerlink" href="#philosophy" title="Permalink to this headline">¶</a></h2>
<p>The TRIQS project is in perpetual dynamic evolution such that we can get our
developments directly to users straight out of the oven.</p>
<p>However, we also understand that some users may not wish to constantly update
their codes, and are happy to use an older but perhaps more stable version.</p>
<p>To this end, we propose two options to the user:</p>
<ol class="arabic simple">
<li>You follow the master branch in the git repository of TRIQS and all applications.
This will guarantee that you are using the latest stable release including essential
bug-fixes. Note that new releases might occasionally include changes of the API, which
we summarize in a set of release notes.
We use continuous integration to ensure that the master branch always compiles and
passes all tests. This is checked for both the TRIQS library and several public
(and private) applications.</li>
<li>You use a version tag, e.g. version 2.0, for TRIQS and all applications.
This guarantees complete reproducibility, while you might be missing out on the latest
features and bug-fixes.</li>
</ol>
</div>
</div>
<div class="section" id="packaged-versions-of-triqs">
<h1>Packaged Versions of TRIQS<a class="headerlink" href="#packaged-versions-of-triqs" title="Permalink to this headline">¶</a></h1>
<div class="section" id="ubuntu-debian-packages">
<h2>Ubuntu Debian packages<a class="headerlink" href="#ubuntu-debian-packages" title="Permalink to this headline">¶</a></h2>
<p>We provide Debian packages for the Ubuntu LTS Versions 16.04 (xenial) and 18.04 (bionic).:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>sudo apt-get update <span class="o">&amp;&amp;</span> sudo apt-get install -y software-properties-common apt-transport-https curl
<span class="nb">source</span> /etc/lsb-release
curl -L https://users.flatironinstitute.org/~ccq/triqs/<span class="nv">$DISTRIB_CODENAME</span>/public.gpg <span class="p">|</span> sudo apt-key add -
sudo add-apt-repository <span class="s2">&quot;deb https://users.flatironinstitute.org/~ccq/triqs/</span><span class="nv">$DISTRIB_CODENAME</span><span class="s2">/ /&quot;</span>
sudo apt-get update <span class="o">&amp;&amp;</span> sudo apt-get install -y triqs
</pre></div>
</div>
<p>This will install the minimal runtime packages and triqs into the system tree at /usr.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Since TRIQS version 2.1 we include cpp2py in the TRIQS debian package.
If you have installed an earlier packaged version of triqs (or cpp2py)
be sure to remove it before updating TRIQS to avoid package conflicts.</p>
</div>
<p>If you aim to compile applications against the triqs library, additional <a class="reference internal" href="installation/ubuntu.html#ubuntu"><span class="std std-ref">development libraries</span></a> have to be installed. You should further set the following <a class="reference internal" href="installation/environment_vars.html#environment-vars"><span class="std std-ref">environment variables</span></a> permanently:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">CPLUS_INCLUDE_PATH</span><span class="o">=</span>/usr/include/openmpi:/usr/include/hdf5/serial/:<span class="nv">$CPLUS_INCLUDE_PATH</span>
<span class="nb">source</span> /usr/share/triqsvars.sh
</pre></div>
</div>
<p>For full c++2py functionality, please read the corresponding <a class="reference internal" href="installation/ubuntu.html#ubuntu-cpp2py"><span class="std std-ref">section</span></a> for the Ubuntu set-up.</p>
</div>
<div class="section" id="docker">
<h2>Docker<a class="headerlink" href="#docker" title="Permalink to this headline">¶</a></h2>
<p>The virtualization software <a class="reference external" href="https://docs.docker.com/install">docker</a>  can be used to
run a TRIQS environment for both Jupyter Notebook and shell access on a variety of operating
systems. Once docker is installed, just pull the latest image with:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>docker pull flatironinstitute/triqs
</pre></div>
</div>
<p>and follow the commands on the <a class="reference external" href="https://hub.docker.com/r/flatironinstitute/triqs">image-website</a>.</p>
</div>
<div class="section" id="singularity">
<h2>Singularity<a class="headerlink" href="#singularity" title="Permalink to this headline">¶</a></h2>
<p>The virtualization software <a class="reference external" href="https://www.sylabs.io/guides/latest/user-guide/">singularity</a> allows for easy set-up on cluster machines.
Ask your cluster administator to install the singularity software. The TRIQS setup is then as simple as:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>singularity pull docker://flatironinstitute/triqs
</pre></div>
</div>
<p>which will generate an image file <cite>triqs_latest.sif</cite>. You can then execute commands inside this image file, e.g.:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>singularity <span class="nb">exec</span> triqs_latest.sif python -c <span class="s2">&quot;from pytriqs import *&quot;</span>
</pre></div>
</div>
<p>In order to run your code in parallel you will need to use Open MPI version 2.1.1 to match the version of the singularity image.
You can then run any command in parallel, e.g.:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>mpirun -np <span class="m">2</span> singularity <span class="nb">exec</span> triqs_latest.sif python -c <span class="s2">&quot;from pytriqs.utility import mpi; print mpi.rank&quot;</span>
</pre></div>
</div>
<p>For more information on the use of singularity in conjunction with docker images please refer to the <a class="reference external" href="https://www.sylabs.io/guides/latest/user-guide/singularity_and_docker.html">documentation</a>.</p>
</div>
<div class="section" id="binder">
<h2>Binder<a class="headerlink" href="#binder" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://mybinder.org">Binder</a> is a web-service running Jupyter notebooks for direct access.
A TRIQS Jupyter notebook environment can be accessed directly at <a class="reference external" href="https://triqs.github.io/notebook">triqs.github.io/notebook</a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Once your binder session is closed, your work will be lost.</p>
</div>
</div>
</div>
<div class="section" id="compiling-triqs-from-source-advanced">
<h1>Compiling TRIQS from source (Advanced)<a class="headerlink" href="#compiling-triqs-from-source-advanced" title="Permalink to this headline">¶</a></h1>
<div class="section" id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h2>
<p>The TRIQS library relies on a certain number of standard libraries and tools
described in the <a class="reference internal" href="installation/requirements.html#requirements"><span class="std std-ref">list of requirements</span></a>. Please pay
particular attention to the <a class="reference internal" href="installation/requirements.html#require-cxx-compilers"><span class="std std-ref">C++ compilers</span></a> and to
<a class="reference internal" href="installation/python_virtualenv.html#python-virtualenv"><span class="std std-ref">Python virtual environments</span></a>.  Here are instructions to
install these necessary libraries on two standard systems:</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation/ubuntu.html">Installing required libraries on Ubuntu</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation/osx_install.html">Installing required libraries on Mac OS X</a></li>
</ul>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Please ensure that you have all the dependencies installed before proceeding further!</p>
</div>
</div>
<div class="section" id="installation-steps">
<h2>Installation steps<a class="headerlink" href="#installation-steps" title="Permalink to this headline">¶</a></h2>
<p>We provide hereafter the build instructions in the form of a documented bash script.
You can adapt INSTALL_PREFIX, NCORES for your local settings.
Note that, contrary to previous versions of TRIQS,
the installation directory CMAKE_INSTALL_PREFIX is now mandatory in the cmake configuration.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="c1"># Set this variable to your desired install directory</span>
<span class="nv">INSTALL_PREFIX</span><span class="o">=</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>/install

<span class="c1"># Set the number of cores for the compilation</span>
<span class="nv">NCORES</span><span class="o">=</span><span class="m">4</span>

<span class="c1"># Clone the git repository of triqs</span>
git clone https://github.com/TRIQS/triqs triqs.src

<span class="c1"># Use cmake to configure the triqs build process</span>
mkdir -p triqs.build <span class="o">&amp;&amp;</span> <span class="nb">cd</span> triqs.build
cmake ../triqs.src -DCMAKE_INSTALL_PREFIX<span class="o">=</span><span class="nv">$INSTALL_PREFIX</span>

<span class="c1"># Build, test and install triqs</span>
make -j<span class="nv">$NCORES</span> <span class="o">&amp;&amp;</span> make <span class="nb">test</span> <span class="o">&amp;&amp;</span> make install
<span class="nb">cd</span> ../

<span class="c1"># Load the triqs installation into your environment</span>
<span class="nb">source</span> <span class="nv">$INSTALL_PREFIX</span>/share/triqsvars.sh

<span class="nb">echo</span> 
<span class="nb">echo</span> <span class="s2">&quot;If you want to automatically load triqs into your environment,&quot;</span>
<span class="nb">echo</span> <span class="s2">&quot;please add the following line to your ~/.bash_profile (or ~/.zprofile):&quot;</span>
<span class="nb">echo</span> <span class="s2">&quot;source </span><span class="nv">$INSTALL_PREFIX</span><span class="s2">/share/triqsvars.sh&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Caution: The compilation of TRIQS, even if run in serial mode, can temporarily
use up to 4 Gigabytes of RAM. The restrictions on the Login-Nodes of certain
HPC Machines might not provide sufficient memory for the compilation.
Please consider compiling within an interactive session on a Compute-Node
or contact the admins of your HPC Machine.</p>
</div>
<div class="section" id="environment-setup">
<h3>Environment setup<a class="headerlink" href="#environment-setup" title="Permalink to this headline">¶</a></h3>
<p>TRIQS provides a small script (<cite>triqsvars.sh</cite>)
to load its installation into your <a class="reference internal" href="installation/environment_vars.html#environment-vars"><span class="std std-ref">environment variables</span></a>.
Please source it with the proper replacement of INSTALL_PREFIX:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="nb">source</span> <span class="nv">$INSTALL_PREFIX</span>/share/triqsvars.sh
</pre></div>
</div>
<p>To automate this process, please add this line to your <a class="reference external" href="https://en.wikipedia.org/wiki/Bash_(Unix_shell)#Startup_scripts">~/.bash_profile</a>
(or <a class="reference external" href="http://zsh.sourceforge.net/FAQ/zshfaq03.html#l19">~/.zprofile</a>)</p>
</div>
</div>
<div class="section" id="further-reading">
<h2>Further reading<a class="headerlink" href="#further-reading" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation/install_options.html">Customizing your installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation/environment_vars.html">Unix environment variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation/clang.html">Using the clang compiler</a></li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="installation/ubuntu.html" title="Installing required libraries on Ubuntu"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome"
             >previous</a> |</li>
    <li><a href="index.html">Home</a> &raquo;</li>
 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2011-2017, The TRIQS collaboration.
    </div>
  </body>
</html>