

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Tutorial &mdash; TRIQS 3.1.0 documentation</title>
  

  
  <link rel="stylesheet" href="../../../../_static/css/custom.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=default"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"processClass": "tex2jax_process|mathjax_process|math|output_area"}})</script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    
    <link rel="author" title="About these documents" href="../../../../about.html" />
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Concepts" href="concepts.html" />
    <link rel="prev" title="Introduction" href="loop.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #7E588A" >
          

          
            <a href="../../../../contents.html" class="icon icon-home"> TRIQS
          

          
          </a>

          
            
            
              <div class="version">
                3.1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../index.html">Welcome</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../index.html#triqs-applications">TRIQS applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../index.html#python-c">Python &amp; C++</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../index.html#where-to-start">Where to start?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../install.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../install.html#packaged-versions-of-triqs">Packaged Versions of TRIQS</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../install.html#ubuntu-debian-packages">Ubuntu Debian packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../install.html#anaconda">Anaconda</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../install.html#docker">Docker</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../install.html#singularity">Singularity</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../install.html#binder">Binder</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../install.html#compiling-triqs-from-source-using-easybuild">Compiling TRIQS from source using EasyBuild</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../install.html#compiling-triqs-from-source-advanced">Compiling TRIQS from source (Advanced)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../install.html#prerequisites">Prerequisites</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../installation/ubuntu.html">Installing required libraries on Ubuntu</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../installation/osx_install.html">Prerequisites for the TRIQS Compilation on Mac OS X</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../install.html#installation-steps">Installation steps</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../install.html#environment-setup">Environment setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../install.html#further-reading">Further reading</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../installation/install_options.html">Customizing your installation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../installation/environment_vars.html">Unix environment variables</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../installation/clang.html">Using the clang compiler</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../../documentation.html">Documentation</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../../../documentation.html#manual">Manual</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../atom_diag/contents.html"><strong>[triqs/atom_diag]</strong> Lightweight exact diagonalization solver and tools</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../cpp_api/triqs/atom_diag/atom_diag.html"> [atom_diag] Exact diagonalization of an atomic problem</a></li>
<li class="toctree-l4"><a class="reference internal" href="../atom_diag/functions.html"> [atom_diag_functions] Utility functions for atom_diag</a></li>
<li class="toctree-l4"><a class="reference internal" href="../atom_diag/contents.html#example-of-use-python">Example of use: Python</a></li>
<li class="toctree-l4"><a class="reference internal" href="../atom_diag/contents.html#example-of-use-c">Example of use: C++</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../c%2B%2B/mpi/mpi.html">triqs/MPI</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../c%2B%2B/mpi/mpi.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../c%2B%2B/mpi/mpi.html#mpi-documentation-manual-triqs">MPI documentation/manual/triqs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../c%2B%2B/mpi/mpi.html#supported-functions-and-types">Supported functions and types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../c%2B%2B/mpi/mpi.html#basic-usage">Basic usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../c%2B%2B/mpi/mpi.html#headers">Headers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../c%2B%2B/mpi/mpi.html#mpi-example">MPI example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../clef/contents.html"><strong>[triqs/clef]</strong> Clef: Compile-time lazy expressions and functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../clef/introduction.html">Motivation: a little tour of CLEF</a></li>
<li class="toctree-l4"><a class="reference internal" href="../clef/expressions_form.html">Forming CLEF expressions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../clef/expressions_eval.html">Evaluating CLEF expressions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../clef/assign.html">Automatic assignment of containers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../clef/overload.html">Overloading functions and methods for CLEF arguments</a></li>
<li class="toctree-l4"><a class="reference internal" href="../clef/function.html">Transform CLEF expressions into functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../clef/examples/contents.html">More complex examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../det_manip/contents.html">Manipulations of determinants</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../det_manip/det_manip.html">The det_manip class</a></li>
<li class="toctree-l4"><a class="reference internal" href="../det_manip/implementation_notes.html">How does it work ?</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../gfs/contents.html">Green’s functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../gfs/c%2B%2B/concepts.html">Concepts</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gfs/basic_notions/contents.html">Basic notions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gfs/c%2B%2B/contents.html">c++</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gfs/py/contents.html">py</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../hdf5/contents.html"><strong>[triqs/h5]</strong> The HDF5 format</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../hdf5/ref.html">Reference documentation/manual</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../userguide/hdf5/hdf5_tutorial.html">HDF5</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../hilbert_space/contents.html"><strong>[triqs/hilbert_space]</strong> Many-body states and Hilbert spaces</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../cpp_api/triqs/hilbert_space/fundamental_operator_set.html">[fundamental_operator_set] Fundamental operator set</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cpp_api/triqs/hilbert_space/hilbert_space.html">[hilbert_space] Full Hilbert space</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cpp_api/triqs/hilbert_space/sub_hilbert_space.html">[sub_hilbert_space] Hilbert subspace</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cpp_api/triqs/hilbert_space/state.html">[state] Many-body state</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cpp_api/triqs/hilbert_space/imperative_operator.html">[imperative_operator] Imperative operator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cpp_api/triqs/hilbert_space/space_partition.html">[autopartition] Automatic partitioning algorithm</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hilbert_space/contents.html#example-of-use">Example of use</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../lattice_tools/contents.html"><strong>[triqs/lattice]</strong> Lattice tools</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../lattice_tools/contents.html#introductory-example">Introductory example</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lattice_tools/contents.html#reference-documentation-manual">Reference documentation/manual</a></li>
</ul>
</li>
<li class="toctree-l3 current"><a class="reference internal" href="contents.html">Tools for Monte Carlo</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="loop.html">Introduction</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Tutorial</a></li>
<li class="toctree-l4"><a class="reference internal" href="concepts.html">Concepts</a></li>
<li class="toctree-l4"><a class="reference internal" href="full_ref.html">Full documentation/manual/triqs</a></li>
<li class="toctree-l4"><a class="reference internal" href="random.html">Random number generator</a></li>
<li class="toctree-l4"><a class="reference internal" href="ising.html">Example: the Ising chain in a magnetic field</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../operators/contents.html"><strong>[triqs/operators]</strong> Second-quantization operators and many-body Hamiltonians</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../operators/operators.html">Second-quantization operators</a></li>
<li class="toctree-l4"><a class="reference internal" href="../operators/util/hamiltonians.html">Hamiltonians</a></li>
<li class="toctree-l4"><a class="reference internal" href="../operators/util/U_matrix.html">U matrix construction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../operators/util/observables.html">Observables</a></li>
<li class="toctree-l4"><a class="reference internal" href="../operators/util/op_struct.html">Helper functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../operators/util/extractors.html">Coefficient extraction</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../plotting_protocols/contents.html">Plotting protocols</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../plotting_protocols/plotting/plotting.html">Plotting TRIQS objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plotting_protocols/fit/fit.html">Fitting data</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../provenance/contents.html">Reproducibility, provenance.</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../provenance/contents.html#triqs-code-version">TRIQS code version</a></li>
<li class="toctree-l4"><a class="reference internal" href="../provenance/contents.html#saving-the-script-in-the-data-archive">Saving the script in the data archive</a></li>
<li class="toctree-l4"><a class="reference internal" href="../provenance/contents.html#from-the-data-to-the-figures">From the data to the figures</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../random_generator/contents.html">Random number generators</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../random_generator/contents.html#usage">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../random_generator/contents.html#example">Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="../random_generator/contents.html#complete-documentation-manual-triqs">Complete documentation/manual/triqs</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../stat/contents.html"><strong>[triqs/stat]</strong> Statistical Analysis</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../stat/contents.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../stat/contents.html#processing-correlated-data">Processing Correlated Data</a></li>
<li class="toctree-l4"><a class="reference internal" href="../stat/contents.html#averages-and-standard-errors">Averages and Standard Errors</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../utilities/contents.html"><strong>[triqs/utility]</strong> Utilities: exceptions, tuple-tools, etc.</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../utilities/exceptions.html">1. Exceptions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../utilities/tupletools.html">2. Tuple tools</a></li>
<li class="toctree-l4"><a class="reference internal" href="../utilities/python_include_mess.html">3. Python include warnings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../conventions.html">C++11/14, notations and documentation conventions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../conventions.html#c-11-c-14">C++11/C++14</a></li>
<li class="toctree-l4"><a class="reference internal" href="../conventions.html#notation">Notation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../conventions.html#documentation-conventions-for-c-code">Documentation conventions for c++ code</a></li>
<li class="toctree-l4"><a class="reference internal" href="../conventions.html#template-parameters">Template parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../conventions.html#parameters">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../conventions.html#return-value">Return value</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../cpp2py/contents.html">c++2py: a C++/Python interfacing tool</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../cpp2py/cfunction.html">The cfunction class</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cpp2py/class.html">The class_ class</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cpp2py/convert.html">Convertion  vs wrapping</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cpp2py/magic.html">Magic for Jupyter notebook</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cpp2py/module.html">The module_ class</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cpp2py/principle.html">General organization</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cpp2py/reference.html">Python API of the desc file</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cpp2py/tutorial.html">Tutorial</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cpp2py/wrap.html">Wrapping classes from C++ to Python</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../documentation.html#c-api">C++ API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../cpp_api/triqs/gfs.html">triqs::gfs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../cpp_api/triqs/gfs.html#type-aliases">Type aliases</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cpp_api/triqs/gfs.html#classes">Classes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cpp_api/triqs/gfs.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../cpp_api/triqs/det_manip.html">triqs::det_manip</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../cpp_api/triqs/det_manip.html#classes">Classes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../cpp_api/triqs/mc_tools.html">triqs::mc_tools</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../cpp_api/triqs/mc_tools.html#type-aliases">Type aliases</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cpp_api/triqs/mc_tools.html#classes">Classes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cpp_api/triqs/mc_tools.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../cpp_api/triqs/hilbert_space.html">triqs::hilbert_space</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../cpp_api/triqs/hilbert_space.html#type-aliases">Type aliases</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cpp_api/triqs/hilbert_space.html#classes">Classes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cpp_api/triqs/hilbert_space.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../cpp_api/triqs/atom_diag.html">triqs::atom_diag</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../cpp_api/triqs/atom_diag.html#type-aliases">Type aliases</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cpp_api/triqs/atom_diag.html#classes">Classes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cpp_api/triqs/atom_diag.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../cpp_api/triqs/stat.html">triqs::stat</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../cpp_api/triqs/stat.html#classes">Classes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cpp_api/triqs/stat.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../cpp_api/mpi.html">mpi</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../cpp_api/mpi.html#classes">Classes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cpp_api/mpi.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../cpp_api/itertools.html">itertools</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../cpp_api/itertools.html#classes">Classes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cpp_api/itertools.html#functions">Functions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../documentation.html#python-api">Python API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../python_api/triqs/gf/Gf.html">triqs.gf.Gf</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../python_api/triqs/utility/dichotomy.html">triqs.utility.dichotomy</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../applications.html"><strong>Applications based on TRIQS</strong></a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../applications.html#impurity-solvers"><strong>Impurity Solvers</strong></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../applications.html#hybridization-expansion-solver"><strong>Hybridization-expansion solver</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../applications.html#hubbard-i-solver-external"><strong>Hubbard I solver (external)</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../applications.html#pyed-exact-diagonalization-for-finite-quantum-systems-external"><strong>PYED - Exact diagonalization for finite quantum systems (external)</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../applications.html#interface-to-the-pomerol-exact-diagonalization-solver-external"><strong>Interface to the pomerol exact diagonalization solver (external)</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../applications.html#interface-to-the-w2dynamics-impurity-solver"><strong>Interface to the w2dynamics impurity solver</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../applications.html#interface-to-the-nrg-ljubljana-impurity-solver"><strong>Interface to the NRG Ljubljana impurity solver</strong></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../applications.html#ab-initio-tools"><strong>Ab-Initio Tools</strong></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../applications.html#dft-tools-toolbox-for-ab-initio-calculations-of-correlated-materials"><strong>DFT tools - Toolbox for ab initio calculations of correlated materials</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../applications.html#tprf-the-two-particle-response-function-tool-box"><strong>TPRF - The Two-Particle Response Function tool box</strong></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../applications.html#analytic-continuation"><strong>Analytic Continuation</strong></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../applications.html#maxent"><strong>Maxent</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../applications.html#som-stochastic-optimization-method-for-analytic-continuation-external"><strong>SOM - Stochastic Optimization Method for Analytic Continuation (external)</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../applications.html#interface-to-omegamaxent"><strong>Interface to Omegamaxent</strong></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../applications.html#other-applications"><strong>Other Applications</strong></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../applications.html#triqs-solver-benchmarks"><strong>TRIQS Solver benchmarks</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../applications.html#app4triqs-application-skeleton"><strong>App4Triqs Application Skeleton</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../applications.html#cpp2py"><strong>Cpp2Py</strong></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../userguide.html">User guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../userguide.html#why-use-triqs">Why use TRIQS?</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../userguide/dmft.html">Dynamical mean-field theory on a Bethe lattice</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../userguide.html#a-quick-tour-in-python">A quick tour in Python</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../userguide/gfs/gfs_tutorial_python.html">Local Green’s functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../userguide/gfs/gfs_tutorial_python.html#a-simple-example">A simple example</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../userguide/gfs/gfs_tutorial_python.html#a-slightly-more-complicated-example">A slightly more complicated example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../userguide/gfs/lattice_gfs_tutorial_python.html">Lattice Green’s functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../userguide/gfs/lattice_gfs_tutorial_python.html#defining-the-meshes">Defining the meshes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../userguide/gfs/lattice_gfs_tutorial_python.html#definition-of-the-green-s-function">Definition of the Green’s function</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../userguide/gfs/lattice_gfs_tutorial_python.html#various-plots">Various plots</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../userguide/gfs/multivar_gfs_tutorial_python.html">Multivariable Green’s functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../userguide/hdf5/hdf5_tutorial_python.html">HDF5 archives</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../userguide/hdf5/tut_ex1.html">Example 1: Storing basic data types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../userguide/hdf5/tut_ex2.html">Example 2: Storing Green’s functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../userguide/hdf5/tut_ex3.html">Example 3: Using the dictionary interface of the archive</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../userguide/tight_binding.html">A tight-binding model on a square lattice</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../userguide/external_resources_python.html">Learn more about Python, ipython and the notebook</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../userguide.html#a-quick-tour-in-c">A quick tour in C++</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../userguide/gfs/gfs_tutorial_cpp.html">Green’s functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../userguide/gfs/gfs_tutorial_cpp.html#matsubara-green-s-functions">Matsubara Green’s functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../userguide/gfs/gfs_tutorial_cpp.html#imaginary-time-green-s-functions-g-tau">Imaginary-time Green’s functions <span class="math notranslate nohighlight">\(G(\tau)\)</span></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../userguide/gfs/gfs_tutorial_cpp.html#real-time-green-s-functions-g-t">Real-time Green’s functions <span class="math notranslate nohighlight">\(G(t)\)</span></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../userguide/arrays/array_tutorial_cpp.html">Multidimensional arrays</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../userguide/arrays/array_tutorial_cpp.html#declaring-and-printing-an-array">Declaring and printing an array</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../userguide/arrays/array_tutorial_cpp.html#simple-operations">Simple operations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../userguide/arrays/array_tutorial_cpp.html#hdf5-archiving">HDF5 Archiving</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../userguide/arrays/array_tutorial_cpp.html#views-ranges-and-slices">Views: ranges and slices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../userguide/arrays/array_tutorial_cpp.html#matrices-and-vectors">Matrices and vectors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../userguide/arrays/array_tutorial_cpp.html#defining-through-a-lazy-expression">Defining through a lazy expression</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../userguide/arrays/array_tutorial_cpp.html#linear-algebra">Linear algebra</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../userguide/arrays/array_tutorial_cpp.html#map-and-fold">Map and fold</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../userguide/det_manip/det_manip_tutorial_cpp.html">Determinants for Continuous-Time Monte-Carlo</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../userguide/det_manip/det_manip_tutorial_cpp.html#creation-of-an-empty-det-manip-class">Creation of an empty det_manip class</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../userguide/det_manip/det_manip_tutorial_cpp.html#creation-of-a-non-empty-det-manip-class">Creation of a non empty det_manip class</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../userguide/det_manip/det_manip_tutorial_cpp.html#get-information-about-a-det-manip-class">Get information about a det_manip class</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../userguide/det_manip/det_manip_tutorial_cpp.html#add-a-line-and-a-column">Add a line and a column</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../userguide/det_manip/det_manip_tutorial_cpp.html#remove-a-line-and-a-column">Remove a line and a column</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../userguide/det_manip/det_manip_tutorial_cpp.html#add-two-lines-and-two-columns">Add two lines and two columns</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../userguide/det_manip/det_manip_tutorial_cpp.html#remove-two-lines-and-two-columns">Remove two lines and two columns</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../userguide/det_manip/det_manip_tutorial_cpp.html#remove-add-the-one-two-last-lines-and-columns">Remove/add the one/two last lines and columns</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../userguide/det_manip/det_manip_tutorial_cpp.html#replace-one-line-and-column">Replace one line and column</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../userguide/hdf5/hdf5_tutorial_cpp.html">Green’s function and HDF5 files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../userguide/using_the_lib/contents.html">Using TRIQS in your own C++ project</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../userguide/using_the_lib/triqs_library.html">Writing you own C++ code with TRIQS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../userguide/using_the_lib/triqs_library.html#a-simple-c-project-with-its-tests-and-documentation">A simple C++ project, with its tests and documentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../userguide/using_the_lib/triqs_library.html#a-mixed-c-python-project">A mixed C++/Python project</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../userguide/using_the_lib/application_structure.html">Conventions for TRIQS applications</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../contributing.html">Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../contributing.html#issues-and-feature-requests">Issues and feature requests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../contributing.html#contributing-to-code-and-documentation">Contributing to code and documentation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../contributing/pull_request.html">How to make a pull request?</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../contributing/pull_request.html#setting-up-your-fork-repository">Setting up your fork repository</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../contributing/pull_request.html#making-your-pull-request">Making your pull request</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../contributing/documentation.html">How to contribute to documentation?</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../contributing/documentation.html#who-should-write-documentation">Who should write documentation?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../contributing/documentation.html#building-the-documentation">Building the documentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../contributing/documentation.html#editing-the-documentation">Editing the documentation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../contributing.html#google-group-mailing-list">Google group / mailing list</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../versions.html">Version compatibility</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../versions.html#triqs-version-numbering">TRIQS version numbering</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../versions.html#triqs-applications-version-numbering">TRIQS applications version numbering</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../versions.html#how-to-determine-the-version-of-the-installed-triqs-library">How to determine the version of the installed TRIQS library</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ChangeLog.html">Changelog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../ChangeLog.html#version-3-1-0">Version 3.1.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#porting-script">Porting Script</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#deprecate-use-of-string-indices-for-green-functions">Deprecate use of string indices for Green functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#change-in-gf-struct-objects">Change in gf_struct objects</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#green-function-meshes-c">Green function meshes (C++)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#move-multi-array-into-triqs-nda-library">Move multi-array into TRIQS/nda library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#triqs-stat-rework">triqs::stat Rework</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#bath-discretization-function">Bath discretization function</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#jenkins-sanitizer-checks">Jenkins Sanitizer Checks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#new-website-theme">New website theme</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#tightbinding-and-tblattice-improvements">TightBinding and TBLattice improvements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#require-c-20-capable-compiler">Require C++20 capable compiler</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#general">General</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#atom-diag">atom_diag</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#cmake">cmake</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#cpp2py">cpp2py</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#doc">doc</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#gf">gf</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#jenkins">jenkins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#lattice">lattice</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#mc-generic">mc_generic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#mesh">mesh</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#mpi">mpi</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#nda">nda</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../ChangeLog.html#version-3-0-2">Version 3.0.2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id2">atom_diag</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id3">gf</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id4">cmake</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#python-3-10">Python 3.10</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#c-20">c++20</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../ChangeLog.html#version-3-0-1">Version 3.0.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#issue-819-atom-diag">Issue 819 - Atom Diag</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id5">General</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#array">array</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id6">Gf</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id7">cmake</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id8">jenkins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id9">doc</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../ChangeLog.html#version-3-0-0">Version 3.0.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#renamings">Renamings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#dependency-management">Dependency Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#h5py-dependency">h5py dependency</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#removal-of-deprecated-api">Removal of deprecated API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id10">General</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id11">atom_diag</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id12">cmake</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#detmanip">detmanip</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id13">doc</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id14">gf</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id15">jenkins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#operators">operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#packaging">packaging</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../ChangeLog.html#version-2-2-3">Version 2.2.3</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id16">General</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id17">cmake</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id18">cpp2py</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id19">gf</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id20">jenkins</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../ChangeLog.html#version-2-2-2">Version 2.2.2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id21">doc</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id22">gf</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id23">cmake</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id24">General</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../ChangeLog.html#version-2-2-1">Version 2.2.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id25">doc</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id26">cmake</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id27">General</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../ChangeLog.html#version-2-2-0">Version 2.2.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#make-range-and-itertools-functionality-standalone">Make range and itertools functionality standalone</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#make-mpi-functionality-standalone-and-change-namespace">Make mpi functionality standalone and change namespace</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#non-owning-views-c">Non-owning views (C++)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#dynamic-analyzer-checks-asan-ubsan">Dynamic Analyzer Checks (ASAN, UBSAN)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#no-longer-install-googletest">No longer install googletest</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#app4triqs">app4triqs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#arrays">arrays</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id28">cmake</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id29">doc</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#fourier">fourier</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id30">gf</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#h5">h5</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#itertools">itertools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id31">jenkins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id32">mc_generic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id33">mpi</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id34">lattice</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id35">operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id36">packaging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#pytriqs">pytriqs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id37">General</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../ChangeLog.html#version-2-1-1">Version 2.1.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id38">jenkins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id39">doc</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id40">cmake</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id41">General</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../ChangeLog.html#version-2-1-0">Version 2.1.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id42">gf</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id43">array</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#clef">clef</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#blockgf">BlockGf</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id44">cmake</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#lapack">lapack</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id45">lattice</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#tail">tail</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#det-manip">det_manip</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id46">atom_diag</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#mc-tools">mc_tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id47">doc</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id48">General</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id49">pytriqs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id50">fourier</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../ChangeLog.html#version-2-0-0">Version 2.0.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#fourier-tail">fourier,tail</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id51">cmake</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#hdf5">hdf5</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id52">arrays</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id53">doc</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#gf-py">gf/py</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#py">py</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id54">General</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#travis">travis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id55">gf</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id56">tail</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id57">pytriqs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#pytriqs-gf">pytriqs/gf</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#test">test</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#tail-fourier">tail,fourier</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../ChangeLog.html#version-1-5">Version 1.5</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#api-changes">API changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../ChangeLog.html#version-1-4">Version 1.4</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#documentation">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#installation">Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#many-body-operators">Many-body operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#greens-functions">Green’s functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#tests">Tests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../ChangeLog.html#version-1-3">Version 1.3</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id58">Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#green-functions">Green functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id59">Many-body operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#monte-carlo-tools">Monte-Carlo tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#determinant-manipulation">Determinant manipulation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id60">HDF5</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#c-2py">c++2py</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id61">Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#miscellaneous">Miscellaneous</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../ChangeLog.html#version-1-2">Version 1.2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#c">C++</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#python">Python</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#id62">Green Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#version-1-1">Version 1.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#version-1-0">Version 1.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#python-classes">Python classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ChangeLog.html#archives">Archives</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../about.html">About TRIQS</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../about.html#authors-contributors">Authors &amp; contributors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../about.html#citation">Citation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../about.html#license">License</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../about.html#disclaimer">Disclaimer</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../faqs.html">Frequently-asked questions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../faqs.html#q-how-do-i-write-my-gf-data-to-text-files-e-g-to-plot-using-other-plotting-tools">Q: How do I write my GF data to text files, e.g. to plot using other plotting tools?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../faqs.html#q-how-do-i-save-the-triqs-hash-and-script-for-debugging-purposes">Q: How do I save the triqs hash and script for debugging purposes?</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../contents.html">TRIQS</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../contents.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../../../documentation.html">Documentation</a> &raquo;</li>
        
          <li><a href="../../contents.html">&lt;no title&gt;</a> &raquo;</li>
        
          <li><a href="contents.html">Tools for Monte Carlo</a> &raquo;</li>
        
      <li>Tutorial</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../../_sources/documentation/manual/triqs/mc_tools/tutorial.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="tutorial">
<h1>Tutorial<a class="headerlink" href="#tutorial" title="Permalink to this headline">¶</a></h1>
<p>In order to have a first overview of the main features of the <code class="docutils literal notranslate"><span class="pre">mc_generic</span></code>
class, let’s start with a concrete Monte Carlo code. We will consider maybe the
simplest problem ever: a single spin in a magnetic field <span class="math notranslate nohighlight">\(h\)</span> at a
temperature <span class="math notranslate nohighlight">\(1/\beta\)</span>. The Hamiltonian is simply:</p>
<div class="math notranslate nohighlight">
\[\mathcal{H} = - h (n_\uparrow - n_\downarrow).\]</div>
<p>You want to compute the magnetization of this single spin. From statistical
mechanics it is clearly just</p>
<div class="math notranslate nohighlight">
\[m = \frac{\exp(\beta h) - \exp(-\beta h)}{\exp(\beta h) + \exp(-\beta h)}\]</div>
<div class="section" id="the-c-code-for-this-problem">
<h2>The C++ code for this problem<a class="headerlink" href="#the-c-code-for-this-problem" title="Permalink to this headline">¶</a></h2>
<p>Let’s see how we can get this result from a Monte Carlo simulation. Here is
a code that would do the job. Note that we put everything in one file here,
but obviously you would usually want to cut this into pieces for clarity:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;triqs/utility/callbacks.hpp&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;triqs/mc_tools/mc_generic.hpp&gt;</span><span class="cp"></span>

<span class="c1">// --------------- the configuration: a spin, the inverse temperature, the external field ---</span>
<span class="k">struct</span> <span class="nc">configuration</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">spin</span><span class="p">;</span>
  <span class="kt">double</span> <span class="n">beta</span><span class="p">,</span> <span class="n">h</span><span class="p">;</span>
  <span class="n">configuration</span><span class="p">(</span><span class="kt">double</span> <span class="n">beta_</span><span class="p">,</span> <span class="kt">double</span> <span class="n">h_</span><span class="p">)</span> <span class="o">:</span> <span class="n">spin</span><span class="p">(</span><span class="mi">-1</span><span class="p">),</span> <span class="n">beta</span><span class="p">(</span><span class="n">beta_</span><span class="p">),</span> <span class="n">h</span><span class="p">(</span><span class="n">h_</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">};</span>

<span class="c1">// --------------- a move: flip the spin ---------------</span>
<span class="k">struct</span> <span class="nc">flip</span> <span class="p">{</span>
  <span class="n">configuration</span> <span class="o">*</span><span class="n">config</span><span class="p">;</span>

  <span class="n">flip</span><span class="p">(</span><span class="n">configuration</span> <span class="o">*</span><span class="n">config_</span><span class="p">)</span> <span class="o">:</span> <span class="n">config</span><span class="p">(</span><span class="n">config_</span><span class="p">)</span> <span class="p">{}</span>

  <span class="kt">double</span> <span class="n">attempt</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">std</span><span class="o">::</span><span class="n">exp</span><span class="p">(</span><span class="mi">-2</span> <span class="o">*</span> <span class="n">config</span><span class="o">-&gt;</span><span class="n">spin</span> <span class="o">*</span> <span class="n">config</span><span class="o">-&gt;</span><span class="n">h</span> <span class="o">*</span> <span class="n">config</span><span class="o">-&gt;</span><span class="n">beta</span><span class="p">);</span> <span class="p">}</span>
  <span class="kt">double</span> <span class="n">accept</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">config</span><span class="o">-&gt;</span><span class="n">spin</span> <span class="o">*=</span> <span class="mi">-1</span><span class="p">;</span>
    <span class="k">return</span> <span class="mf">1.0</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kt">void</span> <span class="n">reject</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">};</span>

<span class="c1">//  ----------------- a measurement: the magnetization ------------</span>
<span class="k">struct</span> <span class="nc">compute_m</span> <span class="p">{</span>
  <span class="n">configuration</span> <span class="o">*</span><span class="n">config</span><span class="p">;</span>
  <span class="kt">double</span> <span class="n">Z</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">M</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

  <span class="n">compute_m</span><span class="p">(</span><span class="n">configuration</span> <span class="o">*</span><span class="n">config_</span><span class="p">)</span> <span class="o">:</span> <span class="n">config</span><span class="p">(</span><span class="n">config_</span><span class="p">)</span> <span class="p">{}</span>

  <span class="kt">void</span> <span class="n">accumulate</span><span class="p">(</span><span class="kt">double</span> <span class="n">sign</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">Z</span> <span class="o">+=</span> <span class="n">sign</span><span class="p">;</span>
    <span class="n">M</span> <span class="o">+=</span> <span class="n">sign</span> <span class="o">*</span> <span class="n">config</span><span class="o">-&gt;</span><span class="n">spin</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kt">void</span> <span class="n">collect_results</span><span class="p">(</span><span class="n">mpi</span><span class="o">::</span><span class="n">communicator</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">double</span> <span class="n">sum_Z</span> <span class="o">=</span> <span class="n">mpi</span><span class="o">::</span><span class="n">reduce</span><span class="p">(</span><span class="n">Z</span><span class="p">,</span> <span class="n">c</span><span class="p">);</span>
    <span class="kt">double</span> <span class="n">sum_M</span> <span class="o">=</span> <span class="n">mpi</span><span class="o">::</span><span class="n">reduce</span><span class="p">(</span><span class="n">M</span><span class="p">,</span> <span class="n">c</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">c</span><span class="p">.</span><span class="n">rank</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Magnetization: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">sum_M</span> <span class="o">/</span> <span class="n">sum_Z</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="c1">//  ----------------- main ------------</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span> <span class="p">{</span>

  <span class="c1">// initialize mpi</span>
  <span class="n">mpi</span><span class="o">::</span><span class="n">environment</span> <span class="n">env</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span> <span class="n">argv</span><span class="p">);</span>
  <span class="n">mpi</span><span class="o">::</span><span class="n">communicator</span> <span class="n">world</span><span class="p">;</span>

  <span class="c1">// greeting</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">world</span><span class="p">.</span><span class="n">rank</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Isolated spin&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

  <span class="c1">// prepare the MC parameters</span>
  <span class="kt">int</span> <span class="n">n_cycles</span>            <span class="o">=</span> <span class="mi">5000000</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">length_cycle</span>        <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">n_warmup_cycles</span>     <span class="o">=</span> <span class="mi">10000</span><span class="p">;</span>
  <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">random_name</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">random_seed</span>         <span class="o">=</span> <span class="mi">374982</span> <span class="o">+</span> <span class="n">world</span><span class="p">.</span><span class="n">rank</span><span class="p">()</span> <span class="o">*</span> <span class="mi">273894</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">verbosity</span>           <span class="o">=</span> <span class="p">(</span><span class="n">world</span><span class="p">.</span><span class="n">rank</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">?</span> <span class="mi">2</span> <span class="o">:</span> <span class="mi">0</span><span class="p">);</span>

  <span class="c1">// construct a Monte Carlo loop</span>
  <span class="n">triqs</span><span class="o">::</span><span class="n">mc_tools</span><span class="o">::</span><span class="n">mc_generic</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span> <span class="n">SpinMC</span><span class="p">(</span><span class="n">random_name</span><span class="p">,</span> <span class="n">random_seed</span><span class="p">,</span> <span class="n">verbosity</span><span class="p">);</span>

  <span class="c1">// parameters of the model</span>
  <span class="kt">double</span> <span class="n">beta</span>  <span class="o">=</span> <span class="mf">0.3</span><span class="p">;</span>
  <span class="kt">double</span> <span class="n">field</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">;</span>

  <span class="c1">// construct configuration</span>
  <span class="n">configuration</span> <span class="n">config</span><span class="p">(</span><span class="n">beta</span><span class="p">,</span> <span class="n">field</span><span class="p">);</span>

  <span class="c1">// add moves and measures</span>
  <span class="n">SpinMC</span><span class="p">.</span><span class="n">add_move</span><span class="p">(</span><span class="n">flip</span><span class="p">(</span><span class="o">&amp;</span><span class="n">config</span><span class="p">),</span> <span class="s">&quot;flip move&quot;</span><span class="p">);</span>
  <span class="n">SpinMC</span><span class="p">.</span><span class="n">add_measure</span><span class="p">(</span><span class="n">compute_m</span><span class="p">(</span><span class="o">&amp;</span><span class="n">config</span><span class="p">),</span> <span class="s">&quot;magnetization measure&quot;</span><span class="p">);</span>

  <span class="c1">// Run and collect results</span>
  <span class="n">SpinMC</span><span class="p">.</span><span class="n">warmup_and_accumulate</span><span class="p">(</span><span class="n">n_warmup_cycles</span><span class="p">,</span> <span class="n">n_cycles</span><span class="p">,</span> <span class="n">length_cycle</span><span class="p">,</span> <span class="n">triqs</span><span class="o">::</span><span class="n">utility</span><span class="o">::</span><span class="n">clock_callback</span><span class="p">(</span><span class="mi">600</span><span class="p">));</span>

  <span class="n">SpinMC</span><span class="p">.</span><span class="n">collect_results</span><span class="p">(</span><span class="n">world</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">Isolated</span> <span class="n">spin</span>
<span class="nl">Magnetization</span><span class="p">:</span> <span class="mf">0.149608</span>
<span class="n">Total</span> <span class="n">number</span> <span class="n">of</span> <span class="nl">measures</span><span class="p">:</span> <span class="mi">5000000</span>
</pre></div>
</div>
<p>Let’s go through the different parts of this code. First we look
at <code class="docutils literal notranslate"><span class="pre">main()</span></code>.</p>
</div>
<div class="section" id="initializing-the-mpi">
<h2>Initializing the MPI<a class="headerlink" href="#initializing-the-mpi" title="Permalink to this headline">¶</a></h2>
<p>As you will see, the Monte Carlo class is completely MPI ready.  The first two
lines of the <code class="docutils literal notranslate"><span class="pre">main()</span></code> just initialize the MPI environment and declare a
communicator. The default communicator is <code class="docutils literal notranslate"><span class="pre">WORLD</span></code> which means that all the
nodes will be involved in the calculation:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">triqs</span><span class="o">::</span><span class="n">mpi</span><span class="o">::</span><span class="n">environment</span> <span class="n">env</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span> <span class="n">argv</span><span class="p">);</span>
<span class="n">triqs</span><span class="o">::</span><span class="n">mpi</span><span class="o">::</span><span class="n">communicator</span> <span class="n">world</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="constructing-the-monte-carlo-simulation">
<h2>Constructing the Monte Carlo simulation<a class="headerlink" href="#constructing-the-monte-carlo-simulation" title="Permalink to this headline">¶</a></h2>
<p>The lines that follow, define the parameters of the Monte
Carlo simulation and construct a Monte Carlo object
called <code class="docutils literal notranslate"><span class="pre">SpinMC</span></code>:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="n">n_cycles</span> <span class="o">=</span> <span class="mi">5000000</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">length_cycle</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">n_warmup_cycles</span> <span class="o">=</span> <span class="mi">10000</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">random_name</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">random_seed</span> <span class="o">=</span> <span class="mi">374982</span> <span class="o">+</span> <span class="n">world</span><span class="p">.</span><span class="n">rank</span><span class="p">()</span> <span class="o">*</span> <span class="mi">273894</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">verbosity</span> <span class="o">=</span> <span class="p">(</span><span class="n">world</span><span class="p">.</span><span class="n">rank</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">?</span> <span class="mi">2</span><span class="o">:</span> <span class="mi">0</span><span class="p">);</span>

<span class="n">triqs</span><span class="o">::</span><span class="n">mc_tools</span><span class="o">::</span><span class="n">mc_generic</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span> <span class="n">SpinMC</span><span class="p">(</span><span class="n">random_name</span><span class="p">,</span> <span class="n">random_seed</span><span class="p">,</span> <span class="n">initial_sign</span><span class="p">,</span> <span class="n">verbosity</span><span class="p">);</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">SpinMC</span></code> is an instance of the <code class="docutils literal notranslate"><span class="pre">mc_generic</span></code> class. First of all, note
that you need to include the header <code class="docutils literal notranslate"><span class="pre">&lt;triqs/mc_tools/mc_generic.hpp&gt;</span></code> in
order to access the <code class="docutils literal notranslate"><span class="pre">mc_generic</span></code> class. The <code class="docutils literal notranslate"><span class="pre">mc_generic</span></code> class is a
template on the type of the Monte Carlo sign. Usually this will be either a
<code class="docutils literal notranslate"><span class="pre">double</span></code> or a <code class="docutils literal notranslate"><span class="pre">complex&lt;double&gt;</span></code>.</p>
<p>The first two arguments define the random number generator by giving its name in
<code class="docutils literal notranslate"><span class="pre">random_name</span></code> (an empty string means the default generator, i.e. the Mersenne
Twister) and the random seed in <code class="docutils literal notranslate"><span class="pre">random_seed</span></code>. As you see the seed is
different for all node with the use of <code class="docutils literal notranslate"><span class="pre">world.rank()</span></code>.</p>
<p>The third argument is the sign of the very first <em>configuration</em> of the
simulation. Because the <code class="docutils literal notranslate"><span class="pre">accept</span></code> method only returns a ratio, this initial
sign is used to determine the sign of all generated configurations.</p>
<p>Finally, the last parameter sets the verbosity level. 0 means no output, 1 will
output the progress level for the current node and 2 additionally shows some
statistics about the simulation when you call <code class="docutils literal notranslate"><span class="pre">collect_results</span></code>. As you see,
we have put <code class="docutils literal notranslate"><span class="pre">verbosity</span></code> to 2 only for the master node and 0 for all the other
ones. This way the information will be printed only by the master.</p>
</div>
<div class="section" id="moves-and-measures">
<h2>Moves and measures<a class="headerlink" href="#moves-and-measures" title="Permalink to this headline">¶</a></h2>
<p>At this stage the basic structure of the Monte Carlo is in <code class="docutils literal notranslate"><span class="pre">SpinMC</span></code>. But we
now need to tell it what moves must be tried and what measures must be made.
This is done with:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>  <span class="c1">// Run and collect results</span>
</pre></div>
</div>
<p>The method <code class="docutils literal notranslate"><span class="pre">add_move</span></code> expects a move and a name, while
<code class="docutils literal notranslate"><span class="pre">add_measure</span></code> expects a measure and a name. The name can be
anything, but different measures must have different names. In this example,
the move is an instance of the <code class="docutils literal notranslate"><span class="pre">flip</span></code> class and the measure an instance of
the <code class="docutils literal notranslate"><span class="pre">compute_m</span></code> class. These classes have been defined in the beginning of
the code and they have no direct connection with the <code class="docutils literal notranslate"><span class="pre">mc_generic</span></code> class (e.g.
they don’t have inheritance links with <code class="docutils literal notranslate"><span class="pre">mc_generic</span></code>).  Actually you are
almost completely free to design these classes as you want, <strong>as long as they
satisfy the correct concept</strong>.</p>
</div>
<div class="section" id="the-move">
<h2>The move<a class="headerlink" href="#the-move" title="Permalink to this headline">¶</a></h2>
<p>Let’s go back to the beginning of the code and have a look at the <code class="docutils literal notranslate"><span class="pre">flip</span></code>
class which proposed a flip of the spin. The class is very short.  It has a
constructor which might define some class variables. But more importantly, it
has three member functions that any move <strong>must</strong> have: <code class="docutils literal notranslate"><span class="pre">attempt</span></code>, <code class="docutils literal notranslate"><span class="pre">accept</span></code> and
<code class="docutils literal notranslate"><span class="pre">reject</span></code>:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>  <span class="n">configuration</span> <span class="o">*</span><span class="n">config</span><span class="p">;</span>

  <span class="n">flip</span><span class="p">(</span><span class="n">configuration</span> <span class="o">*</span><span class="n">config_</span><span class="p">)</span> <span class="o">:</span> <span class="n">config</span><span class="p">(</span><span class="n">config_</span><span class="p">)</span> <span class="p">{}</span>

  <span class="kt">double</span> <span class="n">attempt</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">std</span><span class="o">::</span><span class="n">exp</span><span class="p">(</span><span class="mi">-2</span> <span class="o">*</span> <span class="n">config</span><span class="o">-&gt;</span><span class="n">spin</span> <span class="o">*</span> <span class="n">config</span><span class="o">-&gt;</span><span class="n">h</span> <span class="o">*</span> <span class="n">config</span><span class="o">-&gt;</span><span class="n">beta</span><span class="p">);</span> <span class="p">}</span>
  <span class="kt">double</span> <span class="n">accept</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">config</span><span class="o">-&gt;</span><span class="n">spin</span> <span class="o">*=</span> <span class="mi">-1</span><span class="p">;</span>
    <span class="k">return</span> <span class="mf">1.0</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kt">void</span> <span class="n">reject</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">};</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">attempt</span></code> method is called by the Monte Carlo loop in order to try a new
move. The Monte Carlo class doesn’t care about what this trial is. All that
matters for the loop is the Metropolis ratio describing the transition to a new
proposed configuration. It is precisely this ratio that the <code class="docutils literal notranslate"><span class="pre">attempt</span></code> method is
expected to return:</p>
<div class="math notranslate nohighlight">
\[T = \frac{P_{y,x} \rho(y)}{P_{x,y}\rho(x)}\]</div>
<p>In our example this ratio is</p>
<div class="math notranslate nohighlight">
\[T = \frac{e^{\beta h -\sigma }}{e^{\beta h \sigma}} = e^{ - 2 \beta h \sigma }\]</div>
<p>With this ratio, the Monte Carlo loop decides whether this proposed move should
be rejected, or accepted. If the move is accepted, the Monte Carlo calls the
<code class="docutils literal notranslate"><span class="pre">accept</span></code> method of the move, otherwise it calls the <code class="docutils literal notranslate"><span class="pre">reject</span></code> method.  The
<code class="docutils literal notranslate"><span class="pre">accept</span></code> method should always return 1.0 unless you want to correct the sign
only when moves are accepted for performance reasons (this rather special case
is described in the <a class="reference internal" href="concepts.html#montecarloref"><span class="std std-ref">full documentation/manual/triqs</span></a>).  Note that the
return type of <code class="docutils literal notranslate"><span class="pre">attempt</span></code> and <code class="docutils literal notranslate"><span class="pre">accept</span></code> has to be the same as the template of the
Monte Carlo class.  In our example, nothing has to be done if the move is
rejected. If it is accepted, the spin should be flipped.</p>
</div>
<div class="section" id="the-measure">
<h2>The measure<a class="headerlink" href="#the-measure" title="Permalink to this headline">¶</a></h2>
<p>Just in the same way, the measures are expected to satisfy a concept.
Let’s look at <code class="docutils literal notranslate"><span class="pre">compute_m</span></code>.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>  <span class="n">configuration</span> <span class="o">*</span><span class="n">config</span><span class="p">;</span>
  <span class="kt">double</span> <span class="n">Z</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">M</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

  <span class="n">compute_m</span><span class="p">(</span><span class="n">configuration</span> <span class="o">*</span><span class="n">config_</span><span class="p">)</span> <span class="o">:</span> <span class="n">config</span><span class="p">(</span><span class="n">config_</span><span class="p">)</span> <span class="p">{}</span>

  <span class="kt">void</span> <span class="n">accumulate</span><span class="p">(</span><span class="kt">double</span> <span class="n">sign</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">Z</span> <span class="o">+=</span> <span class="n">sign</span><span class="p">;</span>
    <span class="n">M</span> <span class="o">+=</span> <span class="n">sign</span> <span class="o">*</span> <span class="n">config</span><span class="o">-&gt;</span><span class="n">spin</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kt">void</span> <span class="n">collect_results</span><span class="p">(</span><span class="n">mpi</span><span class="o">::</span><span class="n">communicator</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">double</span> <span class="n">sum_Z</span> <span class="o">=</span> <span class="n">mpi</span><span class="o">::</span><span class="n">reduce</span><span class="p">(</span><span class="n">Z</span><span class="p">,</span> <span class="n">c</span><span class="p">);</span>
    <span class="kt">double</span> <span class="n">sum_M</span> <span class="o">=</span> <span class="n">mpi</span><span class="o">::</span><span class="n">reduce</span><span class="p">(</span><span class="n">M</span><span class="p">,</span> <span class="n">c</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">c</span><span class="p">.</span><span class="n">rank</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Magnetization: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">sum_M</span> <span class="o">/</span> <span class="n">sum_Z</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="c1">//  ----------------- main ------------</span>
</pre></div>
</div>
<p>Here only two methods are expected, <code class="docutils literal notranslate"><span class="pre">accumulate</span></code> and <code class="docutils literal notranslate"><span class="pre">collect_results</span></code>.
The method <code class="docutils literal notranslate"><span class="pre">accumulate</span></code> is called every <code class="docutils literal notranslate"><span class="pre">length_cycle</span></code> Monte Carlo loops.
It takes one argument which is the current sign in the Monte Carlo simulation.
Here, we sum the sign in <code class="docutils literal notranslate"><span class="pre">Z</span></code> (the partition function) and the magnetization
in <code class="docutils literal notranslate"><span class="pre">M</span></code>. The other method <code class="docutils literal notranslate"><span class="pre">collect_results</span></code> is usually called just once at
the very end of the simulation, see below. It is meant to do the final
operations that are needed to have your result. Here it just needs to divide
<code class="docutils literal notranslate"><span class="pre">M</span></code> by <code class="docutils literal notranslate"><span class="pre">Z</span></code> and prints the result on the screen. Note that, it takes the MPI
communicator as an argument, meaning that you can easily do MPI operations
here.  This makes sense because the accumulation will have taken place
independently on all nodes and this is the good moment to gather the
information from all the nodes. This is why you see reduce operations on the
master node here.</p>
</div>
<div class="section" id="starting-the-monte-carlo-simulation">
<h2>Starting the Monte Carlo simulation<a class="headerlink" href="#starting-the-monte-carlo-simulation" title="Permalink to this headline">¶</a></h2>
<p>Well, at this stage we’re ready to launch our simulation. The moves
and measures have been specified, so all you need to do now is start
the simulation with:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">SpinMC</span><span class="p">.</span><span class="n">warmup_and_accumulate</span><span class="p">(</span><span class="n">n_warmup_cycles</span><span class="p">,</span> <span class="n">n_cycles</span><span class="p">,</span> <span class="n">length_cycle</span><span class="p">,</span> <span class="n">triqs</span><span class="o">::</span><span class="n">utility</span><span class="o">::</span><span class="n">clock_callback</span><span class="p">(</span><span class="mi">600</span><span class="p">));</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">warmup</span></code> method takes several arguments.</p>
<p>The first three parameters determine the warmup length, number of measurements
and the length of the Monte Carlo cycles.  The definition of these variables
has been detailed earlier in <a class="reference internal" href="loop.html#montecarloloop"><span class="std std-ref">Introduction</span></a>.</p>
<p>The last argument is used to decide if the simulation must be stopped for some
reason before it reaches the full number of cycles <code class="docutils literal notranslate"><span class="pre">n_cycles</span></code>. For example,
you might be running your code on a cluster that only allows for 1 hour
simulations. In that case, you would want your simulation to stop, say after 55
minutes, even if it didn’t manage to do the <code class="docutils literal notranslate"><span class="pre">n_cycles</span></code> cycles.</p>
<p>In practice, the second argument is a <code class="docutils literal notranslate"><span class="pre">std::function&lt;bool</span> <span class="pre">()&gt;</span></code> which is
called at the end of every cycle. If it returns 0 the simulation goes on, if it
returns 1 the simulation stops. In this example, we used a function
<code class="docutils literal notranslate"><span class="pre">clock_callback(600)</span></code> which starts returning 1 after 600 seconds.  It is
defined in the header <code class="file docutils literal notranslate"><span class="pre">&lt;triqs/utility/callbacks.hpp&gt;</span></code>.  This way the
simulation will last at most 10 minutes.</p>
<p>Note that the simulation would end cleanly. The rest of the code can safely
gather results from the statistics that has been accumulated, even if there
have been less than <code class="docutils literal notranslate"><span class="pre">n_cycles</span></code> cycles.</p>
</div>
<div class="section" id="end-of-the-simulation-gathering-results">
<h2>End of the simulation - gathering results<a class="headerlink" href="#end-of-the-simulation-gathering-results" title="Permalink to this headline">¶</a></h2>
<p>When the simulation is over, it is time to gather the results.  This is done by
calling:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">SpinMC</span><span class="p">.</span><span class="n">collect_results</span><span class="p">(</span><span class="n">world</span><span class="p">);</span>
</pre></div>
</div>
<p>In practice this method goes through all the measurements that have been added
to the simulation and calls their <code class="docutils literal notranslate"><span class="pre">collect_results</span></code> member. As described
above, this does the final computations needed to get the result you are
interested in. It usually also saves or prints these results.</p>
</div>
<div class="section" id="writing-your-own-monte-carlo-simulation">
<h2>Writing your own Monte Carlo simulation<a class="headerlink" href="#writing-your-own-monte-carlo-simulation" title="Permalink to this headline">¶</a></h2>
<p>I hope that this simple example gave you an idea about how to use the
<code class="docutils literal notranslate"><span class="pre">mc_generic</span></code> class. In the next chapter we will address some more advanced
issues, but you should already be able to implement a Monte Carlo simulation of
your own. Maybe the only point that we haven’t addressed and which is useful,
is how to generate random numbers. Actually, as soon as you have generated an
instance of a <code class="docutils literal notranslate"><span class="pre">mc_generic</span></code> class, like <code class="docutils literal notranslate"><span class="pre">SpinMC</span></code> above, you automatically
have an acces to a random number generator with:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">triqs</span><span class="o">::</span><span class="n">mc_tools</span><span class="o">::</span><span class="n">random_generator</span> <span class="n">RNG</span> <span class="o">=</span> <span class="n">SpinMC</span><span class="p">.</span><span class="n">get_rng</span><span class="p">();</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">RNG</span></code> is an instance of a <code class="docutils literal notranslate"><span class="pre">random_generator</span></code>. If you want to
generate a <code class="docutils literal notranslate"><span class="pre">double</span></code> number on the interval <span class="math notranslate nohighlight">\([0,1[\)</span>, you just have to
call <code class="docutils literal notranslate"><span class="pre">RNG()</span></code>. By providing an argument to <code class="docutils literal notranslate"><span class="pre">RNG</span></code> you can generate integer
and real numbers on different intervals. This is described in detail in the
section <a class="reference internal" href="random.html#random"><span class="std std-ref">Random number generator</span></a>.</p>
<p>That’s it! Why don’t you try to write your own Monte Carlo describing an
<span class="xref std std-ref">Ising chain in a field</span>? You will find the solution
in <a class="reference internal" href="ising.html#ising-solution"><span class="std std-ref">this section</span></a>.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="concepts.html" class="btn btn-neutral float-right" title="Concepts" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="loop.html" class="btn btn-neutral float-left" title="Introduction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2011-2021, The TRIQS collaboration.

    </p>
  </div> 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>