
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Frequently-Asked Questions &#8212; TRIQS Analytic Continuation / MaxEnt  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/triqs.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=default"></script>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Reporting issues and contributing improvements" href="../issues.html" />
    <link rel="prev" title="Plot utilities" href="../reference/plot_utils.html" />
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,700' rel='stylesheet' type='text/css'>
    <script src="../_static/cufon-yui.js" type="text/javascript"></script>
    <script src="../_static/spaceman.cufonfonts.js" type="text/javascript"></script>
    <script type="text/javascript">
      Cufon.replace('.triqs', { fontFamily: 'spaceman', hover: true }); 
    </script>
 
    <style type="text/css">
      table.right { float: right; margin-left: 20px; }
      table.right td { border: 1px solid #ccc; }
      
    </style>

  </head><body>
<div class="pageheader">
  <ul>
    
    <li><a href="../install.html">Install</a></li>
    
    <li><a href="../documentation.html">Documentation</a></li>
    
    <li><a href="../issues.html">Issues</a></li>
    
    <li><a href="../about.html">About maxent</a></li>
    
  </ul>
  <div>
    <h1 style="padding:0; margin: 10px 0 0 0;"><a class="triqs" href="../index.html">maxent</a></h1>
    <span style="font-size: 14px; margin: 0px; padding: 0px;">performing analytic continuation</span>
  </div>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../issues.html" title="Reporting issues and contributing improvements"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../reference/plot_utils.html" title="Plot utilities"
             accesskey="P">previous</a> |</li>
    <li><a href="../index.html">Home</a> &raquo;</li>

          <li class="nav-item nav-item-1"><a href="../documentation.html" accesskey="U">Documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Frequently-Asked Questions</a></li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Frequently-Asked Questions</a><ul>
<li><a class="reference internal" href="#how-can-i-use-this-package-for-a-matrix-valued-green-function">How can I use this package for a matrix-valued Green function?</a></li>
<li><a class="reference internal" href="#what-kernels-are-available">What kernels are available?</a></li>
<li><a class="reference internal" href="#why-is-there-a-at-the-end-of-the-output-line-for-some-alpha">Why is there a ! at the end of the output line for some alpha?</a></li>
<li><a class="reference internal" href="#how-can-i-reduce-the-size-of-the-singular-space">How can I reduce the size of the singular space?</a></li>
<li><a class="reference internal" href="#warning-widget-javascript-not-detected-when-i-use-jupyerplotmaxent">Warning ‘Widget Javascript not detected’ when I use <code class="docutils literal notranslate"><span class="pre">JupyerPlotMaxEnt</span></code></a></li>
<li><a class="reference internal" href="#why-is-my-calculation-slow">Why is my calculation slow?</a></li>
<li><a class="reference internal" href="#how-can-i-save-things-to-file">How can I save things to file?</a></li>
<li><a class="reference internal" href="#which-publications-should-i-cite">Which publications should I cite?</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../reference/plot_utils.html"
                        title="previous chapter">Plot utilities</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../issues.html"
                        title="next chapter">Reporting issues and contributing improvements</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/faqs/faqs.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="frequently-asked-questions">
<h1>Frequently-Asked Questions<a class="headerlink" href="#frequently-asked-questions" title="Permalink to this headline">¶</a></h1>
<section id="how-can-i-use-this-package-for-a-matrix-valued-green-function">
<h2>How can I use this package for a matrix-valued Green function?<a class="headerlink" href="#how-can-i-use-this-package-for-a-matrix-valued-green-function" title="Permalink to this headline">¶</a></h2>
<p>Two options to perform a continuation for matrices are available:
<a class="reference internal" href="../reference/elementwise_maxent.html#triqs_maxent.elementwise_maxent.ElementwiseMaxEnt" title="triqs_maxent.elementwise_maxent.ElementwiseMaxEnt"><code class="xref py py-class docutils literal notranslate"><span class="pre">ElementwiseMaxEnt</span></code></a> and <a class="reference internal" href="../reference/elementwise_maxent.html#triqs_maxent.elementwise_maxent.PoormanMaxEnt" title="triqs_maxent.elementwise_maxent.PoormanMaxEnt"><code class="xref py py-class docutils literal notranslate"><span class="pre">PoormanMaxEnt</span></code></a>. How to use these tools is described in the
<a class="reference internal" href="../guide/elementwise.html#elementwise"><span class="std std-ref">elementwise example</span></a>. Both algorithms are based on the individual continuation
of each matrix element. Treating all elements at the same time is currently
not implemented in this package.</p>
</section>
<section id="what-kernels-are-available">
<h2>What kernels are available?<a class="headerlink" href="#what-kernels-are-available" title="Permalink to this headline">¶</a></h2>
<p>Currently we have implemented the base class <a class="reference internal" href="../reference/kernels.html#triqs_maxent.kernels.Kernel" title="triqs_maxent.kernels.Kernel"><code class="xref py py-class docutils literal notranslate"><span class="pre">Kernel</span></code></a>, a fermionic kernel for <span class="math notranslate nohighlight">\(G(\tau)\)</span>
(<a class="reference internal" href="../reference/kernels.html#triqs_maxent.kernels.TauKernel" title="triqs_maxent.kernels.TauKernel"><code class="xref py py-class docutils literal notranslate"><span class="pre">TauKernel</span></code></a>), a kernel for the preblur formalism (<a class="reference internal" href="../reference/kernels.html#triqs_maxent.kernels.PreblurKernel" title="triqs_maxent.kernels.PreblurKernel"><code class="xref py py-class docutils literal notranslate"><span class="pre">PreblurKernel</span></code></a>) and a
generic <a class="reference internal" href="../reference/kernels.html#triqs_maxent.kernels.DataKernel" title="triqs_maxent.kernels.DataKernel"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataKernel</span></code></a>. Adding further kernels (fermionic and bosonic)
and the corresponding <em>XMaxEnt</em> classes is anticipated. However, also contributions
from users in this direction are welcome (e.g., as a <a class="reference internal" href="../issues.html#pull-requests"><span class="std std-ref">pull request</span></a>).</p>
</section>
<section id="why-is-there-a-at-the-end-of-the-output-line-for-some-alpha">
<h2>Why is there a ! at the end of the output line for some alpha?<a class="headerlink" href="#why-is-there-a-at-the-end-of-the-output-line-for-some-alpha" title="Permalink to this headline">¶</a></h2>
<p>The exclamation mark (!) indicates that the minimization did not converge within the maximum
number of steps. The default value is 1000 iterations. To increase the maximum number
of iterations use:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tm</span> <span class="o">=</span> <span class="n">TauMaxEnt</span><span class="p">()</span>
<span class="n">tm</span><span class="o">.</span><span class="n">minimizer</span><span class="o">.</span><span class="n">maxiter</span><span class="o">=</span><span class="mi">5000</span>
</pre></div>
</div>
</section>
<section id="how-can-i-reduce-the-size-of-the-singular-space">
<h2>How can I reduce the size of the singular space?<a class="headerlink" href="#how-can-i-reduce-the-size-of-the-singular-space" title="Permalink to this headline">¶</a></h2>
<p>The default threshold for the singular values is set to 1e-14.
You can change this threshold with:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tm</span><span class="o">.</span><span class="n">reduce_singular_space</span><span class="o">=</span><span class="mf">1e-8</span>
</pre></div>
</div>
</section>
<section id="warning-widget-javascript-not-detected-when-i-use-jupyerplotmaxent">
<h2>Warning ‘Widget Javascript not detected’ when I use <code class="docutils literal notranslate"><span class="pre">JupyerPlotMaxEnt</span></code><a class="headerlink" href="#warning-widget-javascript-not-detected-when-i-use-jupyerplotmaxent" title="Permalink to this headline">¶</a></h2>
<p>Check if you have <strong>ipywidgets</strong> and <strong>widgetsnbextension</strong> installed.
It might also be that you need to enable the <strong>widgetsnbextension</strong> with
<strong>jupyter nbextension enable jupyter-js-widgets/extension</strong>.</p>
</section>
<section id="why-is-my-calculation-slow">
<h2>Why is my calculation slow?<a class="headerlink" href="#why-is-my-calculation-slow" title="Permalink to this headline">¶</a></h2>
<p>Usually it is a good idea to run a first MaxEnt calculation with
weaker settings. The following factors can have a strong impact
on the runtime:</p>
<blockquote>
<div><ul class="simple">
<li><p>size of <span class="math notranslate nohighlight">\(\omega\)</span>-grid: Usually a grid with 100-500 points is enough.
Instead of a linear grid it is better to choose a grid which is denser around
zero and has fewer points at higher frequencies (Lorentzian or Hyperbolic mesh).
(see also <a class="reference internal" href="../reference/omega_meshes.html#omegameshes"><span class="std std-ref">omega meshes</span></a>)</p></li>
<li><p>number of <span class="math notranslate nohighlight">\(\tau\)</span>-grid: Often it is not necessary that 10001 <span class="math notranslate nohighlight">\(\tau\)</span>-points
(default value of TRIQS <code class="docutils literal notranslate"><span class="pre">GfImTime</span></code>) are used for the continuation. Often just a few
hundred points are sufficient.</p></li>
<li><p>size of singular space: The default threshold for the singular values is set to 1e-14.
Reducing the size of the singular space does also speed up the calculation, but can
also have a strong impact on resulting spectra (less structure).</p></li>
<li><p><span class="math notranslate nohighlight">\(\alpha\)</span>-values: Use a initially a coarse <span class="math notranslate nohighlight">\(\alpha\)</span>-mesh. Also make sure that
you start at a rather high value, where the minimization converges quickly. Additionally,
avoid having too many small <span class="math notranslate nohighlight">\(\alpha\)</span> where the change in <span class="math notranslate nohighlight">\(\chi^2\)</span> is already small.</p></li>
<li><p>initial guess for A: For the first <span class="math notranslate nohighlight">\(\alpha\)</span> the initial guess is set to the default model.
This can be changed with <code class="docutils literal notranslate"><span class="pre">tm.A_init</span> <span class="pre">=</span> <span class="pre">myInitA</span></code>. For all consequent <span class="math notranslate nohighlight">\(\alpha\)</span> always
the spectral function for the previous <span class="math notranslate nohighlight">\(\alpha\)</span> is used as starting point.</p></li>
<li><p>matrix-valued Green function: As spectral functions have to be Hermitian, we can
use this fact and perform the continuation only for one half of
the off-diagonal elements (<code class="docutils literal notranslate"><span class="pre">em=ElementwiseMaxEnt(use_hermiticity=True)</span></code>).</p></li>
</ul>
</div></blockquote>
<p>Always carefully check the validity of your results in terms of the parameters listed above.</p>
</section>
<section id="how-can-i-save-things-to-file">
<h2>How can I save things to file?<a class="headerlink" href="#how-can-i-save-things-to-file" title="Permalink to this headline">¶</a></h2>
<p>With TRIQS, a <a class="reference internal" href="../reference/maxent_result.html#triqs_maxent.maxent_result.MaxEntResult" title="triqs_maxent.maxent_result.MaxEntResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">MaxEntResult</span></code></a> object can be saved to file using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># let res be the result, e.g. res = tau_maxent.run()</span>
<span class="c1"># let file_name_of_h5_file be a str with the file name</span>
<span class="c1"># let name_of_result be the desired name of the group in the file</span>
<span class="kn">from</span> <span class="nn">h5</span> <span class="kn">import</span> <span class="n">HDFArchive</span>
<span class="k">with</span> <span class="n">HDFArchive</span><span class="p">(</span><span class="n">file_name_of_h5_file</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">ar</span><span class="p">:</span>
    <span class="n">ar</span><span class="p">[</span><span class="n">name_of_result</span><span class="p">]</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">data</span>
</pre></div>
</div>
<p>Loading is similar:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">HDFArchive</span><span class="p">(</span><span class="n">file_name_of_h5_file</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">ar</span><span class="p">:</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">ar</span><span class="p">[</span><span class="n">name_of_result</span><span class="p">]</span>
</pre></div>
</div>
<p>Without TRIQS, there is no platform-independent way of saving and loading implemented.
However, you can always pickle the result:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># let res be the result, e.g. res = tau_maxent.run()</span>
<span class="c1"># let file_name_of_pickle_file be a str with the file name</span>

<span class="kn">import</span> <span class="nn">pickle</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_name_of_pickle_file</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fi</span><span class="p">:</span>
    <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">fi</span><span class="p">)</span>
</pre></div>
</div>
<p>Loading:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_name_of_pickle_file</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fi</span><span class="p">:</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fi</span><span class="p">)</span>
</pre></div>
</div>
<p>Apart from MaxEntResult and its cousin, <a class="reference internal" href="../reference/analyzers/analyzer.html#triqs_maxent.analyzers.analyzer.AnalyzerResult" title="triqs_maxent.analyzers.analyzer.AnalyzerResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AnalyzerResult</span></code></a>, saving and loading to h5 is
only implemented for <a class="reference internal" href="../reference/sigma_continuator.html#triqs_maxent.sigma_continuator.SigmaContinuator" title="triqs_maxent.sigma_continuator.SigmaContinuator"><code class="xref py py-class docutils literal notranslate"><span class="pre">SigmaContinuator</span></code></a> objects.</p>
</section>
<section id="which-publications-should-i-cite">
<span id="citations"></span><h2>Which publications should I cite?<a class="headerlink" href="#which-publications-should-i-cite" title="Permalink to this headline">¶</a></h2>
<p>Please cite the code with its github repo, <a class="reference external" href="https://github.com/TRIQS/maxent">https://github.com/TRIQS/maxent</a>, and its authors <em>Gernot J. Kraberger</em> and <em>Manuel Zingl</em>.</p>
<p>Furthermore, the general MaxEnt method for analytical continuation can be cited as <a class="reference external" href="https://doi.org/10.1103/PhysRevB.44.6011">J. E. Gubernatis, M. Jarrell, R. N. Silver, and D. S. Sivia, Phys. Rev. B 44, 6011 (1991)</a>.
If you use the additions in the code concerting matrix-valued Green functions, please consider citing our paper <a class="reference external" href="https://link.aps.org/doi/10.1103/PhysRevB.96.155128">G. J. Kraberger, R. Triebl, M. Zingl and M. Aichhorn, Phys. Rev. B 96, 155128 (2017)</a>.</p>
<p>For a more detailed list of relevant publications that you might want to cite as well, see <a class="reference internal" href="../basicnotions/shoulders_giants.html#shoulders-giants"><span class="std std-ref">Standing on the shoulders of giants</span></a>.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../issues.html" title="Reporting issues and contributing improvements"
             >next</a> |</li>
        <li class="right" >
          <a href="../reference/plot_utils.html" title="Plot utilities"
             >previous</a> |</li>
    <li><a href="../index.html">Home</a> &raquo;</li>

          <li class="nav-item nav-item-1"><a href="../documentation.html" >Documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Frequently-Asked Questions</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017-2018 G. J. Kraberger and M. Zingl.
    </div>
  </body>
</html>