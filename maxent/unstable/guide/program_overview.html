<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>In-depth discussion of the program structure &mdash; triqs_maxent  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=f7f783a0" />
      <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />

  
    <link rel="shortcut icon" href="../_static/triqs_favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script defer="defer" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=default"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Custom functions" href="customization.html" />
    <link rel="prev" title="Continuation of self-energies: Sr2RuO4" href="sigma_continuator.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #7E588A" >

          
          
          <a href="../index.html" class="icon icon-home">
            triqs_maxent
          </a>
              <div class="version">
                3.2.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../install.html">Install triqs_maxent</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../install.html#packaged-versions-of-triqs-maxent">Packaged Versions of TRIQS/maxent</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../install.html#ubuntu-debian-packages">Ubuntu Debian packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install.html#docker">Docker</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../install.html#compiling-triqs-maxent-from-source">Compiling triqs_maxent from source</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../install.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install.html#installation-steps">Installation steps</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install.html#version-compatibility">Version compatibility</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install.html#custom-cmake-options">Custom CMake options</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../documentation.html">Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../documentation.html#basic-notions">Basic notions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../basicnotions/mathematics.html">Mathematical and Physical Background</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../basicnotions/mathematics.html#mathematical-formulation-of-the-problem">Mathematical Formulation of the Problem</a></li>
<li class="toctree-l4"><a class="reference internal" href="../basicnotions/mathematics.html#entropy-regularization">Entropy Regularization</a></li>
<li class="toctree-l4"><a class="reference internal" href="../basicnotions/mathematics.html#off-diagonal-elements">Off-diagonal elements</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../basicnotions/maxentflavors.html">Ways of choosing <span class="math notranslate nohighlight">\(\alpha\)</span></a></li>
<li class="toctree-l3"><a class="reference internal" href="../basicnotions/concepts.html">Conceptual ideas of this package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../basicnotions/concepts.html#flexible-implementation">Flexible implementation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../basicnotions/concepts.html#different-ways-of-choosing-alpha">Different ways of choosing alpha</a></li>
<li class="toctree-l4"><a class="reference internal" href="../basicnotions/concepts.html#continuation-of-off-diagonal-elements">Continuation of off-diagonal elements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../basicnotions/concepts.html#quality-control">Quality control</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../basicnotions/shoulders_giants.html">Standing on the shoulders of giants</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="../documentation.html#user-guide">User guide</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="tau_maxent.html">Continuation of a 1x1 Green Function</a><ul>
<li class="toctree-l4"><a class="reference internal" href="tau_maxent.html#creation-of-a-mock-g-tau">Creation of a mock <span class="math notranslate nohighlight">\(G(\tau)\)</span></a></li>
<li class="toctree-l4"><a class="reference internal" href="tau_maxent.html#setting-up-and-running-taumaxent">Setting up and running TauMaxEnt</a></li>
<li class="toctree-l4"><a class="reference internal" href="tau_maxent.html#changing-some-of-the-parameters">Changing some of the parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="tau_maxent.html#choosing-the-value-of-the-hyper-parameter">Choosing the value of the hyper-parameter</a></li>
<li class="toctree-l4"><a class="reference internal" href="tau_maxent.html#visualizing-and-checking-the-results">Visualizing and checking the results</a></li>
<li class="toctree-l4"><a class="reference internal" href="tau_maxent.html#metallic-model">Metallic Model</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="visualization.html">Visualization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="visualization.html#jupyter-widget">Jupyter Widget</a></li>
<li class="toctree-l4"><a class="reference internal" href="visualization.html#maxentresultdata-gui">MaxEntResultData GUI</a></li>
<li class="toctree-l4"><a class="reference internal" href="visualization.html#plot-methods">plot_* methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="visualization.html#plot-data-by-hand">Plot data by hand</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="preblur.html">Continuation of metallic solutions using preblur</a></li>
<li class="toctree-l3"><a class="reference internal" href="elementwise.html">Continuation of matrix-valued functions </a></li>
<li class="toctree-l3"><a class="reference internal" href="srvo3.html">Real-material application: SrVO<sub>3</sub></a><ul>
<li class="toctree-l4"><a class="reference internal" href="srvo3.html#running-taumaxent">Running TauMaxEnt</a></li>
<li class="toctree-l4"><a class="reference internal" href="srvo3.html#analyzing-the-result">Analyzing the result</a></li>
<li class="toctree-l4"><a class="reference internal" href="srvo3.html#visualization-in-notebook">Visualization in notebook</a></li>
<li class="toctree-l4"><a class="reference internal" href="srvo3.html#saving-the-data-to-a-h5-file">Saving the data to a h5-file</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="blockgf.html">Continuation of a TRIQS BlockGf</a></li>
<li class="toctree-l3"><a class="reference internal" href="sigma_continuator.html">Continuation of self-energies: Sr<sub>2</sub>RuO<sub>4</sub></a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">In-depth discussion of the program structure</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#structure-of-the-code">Structure of the code</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-concept-of-caching-the-evaluation">The concept of caching the evaluation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="customization.html">Custom functions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../documentation.html#reference-manual">Reference manual</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/elementwise_maxent.html">ElementwiseMaxEnt</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/tau_maxent.html">TauMaxEnt</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/maxent_loop.html">MaxEntLoop</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/cost_functions.html">Cost Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/cost_functions.html#maxent-cost-function">MaxEnt cost function</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/cost_functions.html#bryan-cost-function">Bryan Cost Function</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/minimizers/convergence_methods.html">Convergence Methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/minimizers/levenberg_minimizer.html">LevenbergMinimizer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/minimizers/minimizer.html">Minimizer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/analyzers/analyzer.html">Analyzer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/analyzers/analyzers.html">Analyzers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/probabilities.html">Probabilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/logtaker.html">Logtaker</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/functions.html">Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/kernels.html">Kernels</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/default_models.html">Default Models</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/default_models.html#triqs_maxent.default_models.BaseDefaultModel"><code class="docutils literal notranslate"><span class="pre">BaseDefaultModel</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/default_models.html#triqs_maxent.default_models.FlatDefaultModel"><code class="docutils literal notranslate"><span class="pre">FlatDefaultModel</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/default_models.html#triqs_maxent.default_models.DataDefaultModel"><code class="docutils literal notranslate"><span class="pre">DataDefaultModel</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/default_models.html#triqs_maxent.default_models.FileDefaultModel"><code class="docutils literal notranslate"><span class="pre">FileDefaultModel</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/omega_meshes.html">Omega Meshes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/alpha_meshes.html">Alpha Meshes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/alpha_meshes.html#triqs_maxent.alpha_meshes.BaseAlphaMesh"><code class="docutils literal notranslate"><span class="pre">BaseAlphaMesh</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/alpha_meshes.html#triqs_maxent.alpha_meshes.DataAlphaMesh"><code class="docutils literal notranslate"><span class="pre">DataAlphaMesh</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/alpha_meshes.html#triqs_maxent.alpha_meshes.LogAlphaMesh"><code class="docutils literal notranslate"><span class="pre">LogAlphaMesh</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/alpha_meshes.html#triqs_maxent.alpha_meshes.LinearAlphaMesh"><code class="docutils literal notranslate"><span class="pre">LinearAlphaMesh</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/maxent_result.html">MaxEntResult</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/sigma_continuator.html">SigmaContinuator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/maxent_util.html">Maxent Utilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/preblur.html">Preblur</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/plot_utils.html">Plot utilities</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../documentation.html#faqs">FAQs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../faqs/faqs.html">Frequently-Asked Questions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../faqs/faqs.html#how-can-i-use-this-package-for-a-matrix-valued-green-function">How can I use this package for a matrix-valued Green function?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../faqs/faqs.html#what-kernels-are-available">What kernels are available?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../faqs/faqs.html#why-is-there-a-at-the-end-of-the-output-line-for-some-alpha">Why is there a ! at the end of the output line for some alpha?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../faqs/faqs.html#how-can-i-reduce-the-size-of-the-singular-space">How can I reduce the size of the singular space?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../faqs/faqs.html#warning-widget-javascript-not-detected-when-i-use-jupyerplotmaxent">Warning ‘Widget Javascript not detected’ when I use <code class="docutils literal notranslate"><span class="pre">JupyerPlotMaxEnt</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../faqs/faqs.html#why-is-my-calculation-slow">Why is my calculation slow?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../faqs/faqs.html#how-can-i-save-things-to-file">How can I save things to file?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../faqs/faqs.html#which-publications-should-i-cite">Which publications should I cite?</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../issues.html">Reporting issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ChangeLog.html">Changelog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ChangeLog.html#version-3-2-0">Version 3.2.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ChangeLog.html#version-1-2-0">Version 1.2.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../ChangeLog.html#general">General</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ChangeLog.html#cmake">cmake</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ChangeLog.html#doc">doc</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ChangeLog.html#jenkins">jenkins</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ChangeLog.html#version-1-1-1">Version 1.1.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ChangeLog.html#version-1-1-0">Version 1.1.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ChangeLog.html#version-1-0-0">Version 1.0.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ChangeLog.html#version-0-9-1">Version 0.9.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ChangeLog.html#version-0-9-0">Version 0.9.0</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../about.html">About triqs_maxent</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../about.html#license">License</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about.html#authors-quotation">Authors &amp; Quotation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about.html#disclaimer">Disclaimer</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #7E588A" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">triqs_maxent</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../documentation.html">Documentation</a></li>
      <li class="breadcrumb-item active">In-depth discussion of the program structure</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/guide/program_overview.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="in-depth-discussion-of-the-program-structure">
<h1>In-depth discussion of the program structure<a class="headerlink" href="#in-depth-discussion-of-the-program-structure" title="Link to this heading"></a></h1>
<section id="structure-of-the-code">
<h2>Structure of the code<a class="headerlink" href="#structure-of-the-code" title="Link to this heading"></a></h2>
<p>The code is set up in different layers.</p>
<p>The lowest layer are input quantities and parameters, such as the
<code class="xref py py-mod docutils literal notranslate"><span class="pre">omega</span> <span class="pre">meshes</span></code>, the <a class="reference internal" href="../reference/alpha_meshes.html#module-triqs_maxent.alpha_meshes" title="triqs_maxent.alpha_meshes"><code class="xref py py-mod docutils literal notranslate"><span class="pre">values</span> <span class="pre">of</span> <span class="pre">alpha</span></code></a>,
the input data (i.e., a Green function <span class="math notranslate nohighlight">\(G(\tau)\)</span> and its error).
Furthermore, the kernel (e.g., the <code class="xref py py-class docutils literal notranslate"><span class="pre">TauKernel</span></code>) that linearly relates the
spectral function to the input Green function has to be defined.</p>
<p>The next layer is the choice of the <code class="xref py py-class docutils literal notranslate"><span class="pre">doubly</span> <span class="pre">derivable</span> <span class="pre">functions</span></code>
for <span class="math notranslate nohighlight">\(\chi^2\)</span> (it will usually be the <code class="xref py py-class docutils literal notranslate"><span class="pre">NormalChi2</span></code>) and
for <span class="math notranslate nohighlight">\(S\)</span> (e.g., the <code class="xref py py-class docutils literal notranslate"><span class="pre">NormalEntropy</span></code> or the <code class="xref py py-class docutils literal notranslate"><span class="pre">PlusMinusEntropy</span></code>).
The function for <span class="math notranslate nohighlight">\(\chi^2\)</span> has as parameters the kernel (which itself depends on <span class="math notranslate nohighlight">\(\tau\)</span> and <span class="math notranslate nohighlight">\(\omega\)</span>),
the Green function data and the error and evaluates the value of the misfit for a given spectral function.
The function for <span class="math notranslate nohighlight">\(S\)</span> has as a parameter the default model (which depends on <span class="math notranslate nohighlight">\(\omega\)</span>)
and evaluates the value of the entropy for a given spectral function.
Typically, the solution of the optimization of the cost function <span class="math notranslate nohighlight">\(Q = \frac12 \chi^2 - \alpha S\)</span>
is not searched in the space of <span class="math notranslate nohighlight">\(A(\omega)\)</span>, but <span class="math notranslate nohighlight">\(A(\omega)\)</span> is parametrized using the
singular value decomposition of the kernel, using a parameter vector <span class="math notranslate nohighlight">\(v\)</span> in singular space.
As a slight complication, for non-uniform <span class="math notranslate nohighlight">\(\omega\)</span> meshes,
the cost function has to be optimized with respect to <span class="math notranslate nohighlight">\(H = A(\omega) \Delta\omega\)</span>.
Therefore, we split the parametrization into <span class="math notranslate nohighlight">\(A(v) = A(H(v))\)</span>.
Different parametrizations are possible, we provide, e.g., the <code class="xref py py-class docutils literal notranslate"><span class="pre">NormalH_of_v</span></code> and
<code class="xref py py-class docutils literal notranslate"><span class="pre">PlusMinusH_of_v</span></code>, which are typically used together with <code class="xref py py-class docutils literal notranslate"><span class="pre">IdentityA_of_H</span></code>.</p>
<p>The next layer is the cost function, which represents the <code class="xref py py-class docutils literal notranslate"><span class="pre">doubly</span> <span class="pre">derivable</span> <span class="pre">functions</span></code>
<span class="math notranslate nohighlight">\(Q(v)\)</span>.
It, of course, depends on the choices made in the previous layers.
Here, for the first time, the <span class="math notranslate nohighlight">\(\alpha\)</span> dependence comes in; the cost function can only
be evaluated once this parameter is chosen.
For this, we offer the <code class="xref py py-class docutils literal notranslate"><span class="pre">MaxEntCostFunction</span></code>.
There is a different choice, the <code class="xref py py-class docutils literal notranslate"><span class="pre">BryanCostFunction</span></code>, which uses optimizations for speed
that imply the choice of the normal expressions for <span class="math notranslate nohighlight">\(\chi^2\)</span> and <span class="math notranslate nohighlight">\(S\)</span>.
Therefore, the latter only works for diagonal elements of the spectral function.</p>
<p>Given the <span class="math notranslate nohighlight">\(\alpha\)</span> dependence of the cost function, typically a loop over different values
of <span class="math notranslate nohighlight">\(\alpha\)</span> has to be performed.
This is the next layer, which consists of the <code class="xref py py-class docutils literal notranslate"><span class="pre">MaxEntLoop</span></code> class.
It connects the cost function, a minimizer (which does the actual minimization, e.g. the <code class="xref py py-class docutils literal notranslate"><span class="pre">LevenbergMinimizer</span></code>),
an <a class="reference internal" href="../reference/alpha_meshes.html#module-triqs_maxent.alpha_meshes" title="triqs_maxent.alpha_meshes"><code class="xref py py-mod docutils literal notranslate"><span class="pre">alpha</span> <span class="pre">mesh</span></code></a>, an expression for the <code class="xref py py-mod docutils literal notranslate"><span class="pre">probability</span></code> of a given
<span class="math notranslate nohighlight">\(\alpha\)</span> given the solution and <a class="reference internal" href="../reference/analyzers/analyzers.html#analyzersref"><span class="std std-ref">analyzers</span></a> that pick a particular <span class="math notranslate nohighlight">\(\alpha\)</span>.
The <code class="xref py py-class docutils literal notranslate"><span class="pre">MaxEntLoop</span></code> class is the lowest layer that can perform an analytic continuation automatically
and give back meaningful results with little effort.
Of course, it has sensible defaults for all its dependencies.
When <code class="xref py py-meth docutils literal notranslate"><span class="pre">running</span></code> the MaxEnt loop, it returns a <code class="xref py py-class docutils literal notranslate"><span class="pre">MaxEntResult</span></code> that
contains the output spectral function as well as other quantities for diagnostic purposes.
The data of the <code class="xref py py-class docutils literal notranslate"><span class="pre">MaxEntResult</span></code> can be written to an h5-file.</p>
<p>In order to simplify the use for common cases, there is the <code class="xref py py-class docutils literal notranslate"><span class="pre">TauMaxEnt</span></code> class that provides
a simplification layer for <code class="xref py py-class docutils literal notranslate"><span class="pre">MaxEntLoop</span></code>.
It uses the <code class="xref py py-class docutils literal notranslate"><span class="pre">TauKernel</span></code> and provides methods to set the Green function and the error.</p>
<p>For matrix-valued spectral functions, the continuation can be performed element-wise by using the <code class="xref py py-class docutils literal notranslate"><span class="pre">ElementwiseMaxEnt</span></code> layer
on top of the <code class="xref py py-class docutils literal notranslate"><span class="pre">TauMaxEnt</span></code> class.</p>
<p>We want to note that from each level downwards, typically the values of all the quantities are shadowed.
This means, if we want to access the <span class="math notranslate nohighlight">\(omega\)</span>-mesh of an <code class="xref py py-class docutils literal notranslate"><span class="pre">ElementwiseMaxEnt</span></code> class,
all the following calls are equivalent:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">elementwise_maxent</span><span class="o">.</span><span class="n">omega</span>
<span class="n">elementwise_maxent</span><span class="o">.</span><span class="n">maxent_diagonal</span><span class="o">.</span><span class="n">omega</span> <span class="c1"># maxent_diagonal is a TauMaxEnt instance</span>
<span class="n">elementwise_maxent</span><span class="o">.</span><span class="n">maxent_diagonal</span><span class="o">.</span><span class="n">maxent_loop</span><span class="o">.</span><span class="n">omega</span>
<span class="n">elementwise_maxent</span><span class="o">.</span><span class="n">maxent_diagonal</span><span class="o">.</span><span class="n">maxent_loop</span><span class="o">.</span><span class="n">cost_function</span><span class="o">.</span><span class="n">omega</span>
<span class="n">elementwise_maxent</span><span class="o">.</span><span class="n">maxent_diagonal</span><span class="o">.</span><span class="n">maxent_loop</span><span class="o">.</span><span class="n">cost_function</span><span class="o">.</span><span class="n">chi2</span><span class="o">.</span><span class="n">omega</span>
<span class="n">elementwise_maxent</span><span class="o">.</span><span class="n">maxent_diagonal</span><span class="o">.</span><span class="n">maxent_loop</span><span class="o">.</span><span class="n">cost_function</span><span class="o">.</span><span class="n">chi2</span><span class="o">.</span><span class="n">K</span><span class="o">.</span><span class="n">omega</span>
</pre></div>
</div>
</section>
<section id="the-concept-of-caching-the-evaluation">
<h2>The concept of caching the evaluation<a class="headerlink" href="#the-concept-of-caching-the-evaluation" title="Link to this heading"></a></h2>
<p>Whenever a <code class="xref py py-class docutils literal notranslate"><span class="pre">doubly</span> <span class="pre">derivable</span> <span class="pre">function</span></code> is called with a certain input,
we want to save the output value if we need it later on.
This leads to a considerable speed increase of the program.
This is implemented for all py:class:<cite>doubly derivable functions &lt;.DoublyDerivableFunction&gt;</cite>.
For instance, the <code class="xref py py-class docutils literal notranslate"><span class="pre">NormalChi2</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">chi2</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
<span class="n">chi2</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
</pre></div>
</div>
<p>will only evaluated once, the second time the cached value will be returned.
The same holds for the first derivative, <code class="docutils literal notranslate"><span class="pre">chi2.d(A)</span></code>, and the
second derivative, <code class="docutils literal notranslate"><span class="pre">chi2.dd(A)</span></code>.</p>
<p>There is another way of supplying the argument to the function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">chi2_A</span> <span class="o">=</span> <span class="n">chi2</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
<span class="n">chi2_A</span><span class="o">.</span><span class="n">f</span><span class="p">()</span>
<span class="n">chi2_A</span><span class="o">.</span><span class="n">d</span><span class="p">()</span>
<span class="n">chi2_A</span><span class="o">.</span><span class="n">dd</span><span class="p">()</span>
</pre></div>
</div>
<p>That way, the supplied argument is saved and does not have to be repeated.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="sigma_continuator.html" class="btn btn-neutral float-left" title="Continuation of self-energies: Sr2RuO4" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="customization.html" class="btn btn-neutral float-right" title="Custom functions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2018-2021 The Simons Foundation, 2018 G. J. Kraberger, authors: G. J. Kraberger and M. Zingl.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>